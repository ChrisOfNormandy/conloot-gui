(this["webpackJsonpconloot-gui"]=this["webpackJsonpconloot-gui"]||[]).push([[0],{1:function(e,t){var n={position:{x:0,y:0,old:{x:0,y:0}},button:{state:!1,id:0,origin:{x:null,y:null}},displacement:function(){return{x:null===n.position.old.x?0:n.position.x-n.position.old.x,y:null===n.position.old.y?0:n.position.y-n.position.old.y}},getPosition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?{x:n.position.x,y:n.position.y}:{x:n.position.x-e.x,y:n.position.y-e.y}},inBounds:!1,moving:!1,clicked:!1};e.exports=n},24:function(e,t,n){},25:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){"use strict";n.r(t);var i=n(2),o=n.n(i),a=n(16),r=n.n(a),c=(n(24),n(25),n(3)),l=n(9),u=n(7),s=n(5),d=n(4),h=n(8),g=n(1),p=n.n(g),b=h.c.shared,f=h.b;function m(e){var t=Number(e).toString(16);return 1===t.length?"0".concat(t):t}function v(e,t,n){return Number("0x".concat(m(e)).concat(m(t)).concat(m(n)))}var x={app:null,brush:{style:"pencil",fill:{r:0,g:0,b:0,a:255},size:1},resolution:0,background:[],width:0,height:0,scale:0,debug:!1,debugElem:document.getElementById("debug"),pixels:[],showGrid:!1,refresh:!1,doBoundUpdate:!0,bounds:null,type:"WebGL",getCurrentColor:function(){return{r:x.brush.fill.r,g:x.brush.fill.g,b:x.brush.fill.b,a:x.brush.fill.a}},setBrush:function(e){x.brush.style=e},setBrushSize:function(e){x.brush.size=e},updateBounds:function(){var e=x.app.view.getBoundingClientRect();x.bounds={x:e.x,y:e.y,left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width,height:e.height},x.doBoundUpdate=!1},startup:function(){return x.onReady((function(){return x.app.ticker.add((function(){return x.draw()}))})),x.app.view},onReady:function(e){console.log("App ready. Loading."),h.d.isWebGLSupported()||(x.type="canvas"),h.d.sayHello(x.type),b.load(e)},updateDebug:function(){if(null===x.debugElem&&(x.debugElem=document.getElementById("debug")),x.debug){var e=p.a.getPosition(),t=Math.floor(e.x/x.scale),n=Math.floor(e.y/x.scale);x.debugElem.innerHTML="Mouse: ".concat(JSON.stringify(e)," --\x3e ").concat(t,", ").concat(n,"<br />")+"Brush:<br />"+" - Color: ".concat(JSON.stringify(x.brush.fill),"<br />")+" - Hex: 0x".concat(m(x.brush.fill.r)).concat(m(x.brush.fill.g)).concat(m(x.brush.fill.b),"<br />")+" - Style: ".concat(x.brush.style,"<br />")+"Buffer: ".concat(x.buffer.length)}else x.debugElem.innerHTML=""},buffer:[],painting:{mousePos:null,highlight:{x:0,y:0,graphic:null}},draw:function(){if(x.updateDebug(),x.refresh)return x.pixels.forEach((function(e){x.app.stage.removeChild(e.graphic),x.setPixel(e.x,e.y,e.color)})),void(x.refresh=!1);x.buffer.forEach((function(e,t){e.graphic.tint=v(e.color.r,e.color.g,e.color.b),e.graphic.alpha=e.color.a,x.buffer.splice(t,1)})),x.painting.mousePos=p.a.getPosition(),x.painting.highlight.x=Math.floor(x.painting.mousePos.x/x.scale),x.painting.highlight.y=Math.floor(x.painting.mousePos.y/x.scale),x.painting.highlight.graphic.x=x.painting.highlight.x*x.scale,x.painting.highlight.graphic.y=x.painting.highlight.y*x.scale,p.a.button.state&&(x.painting.highlight.x>=0&&x.painting.highlight.x<x.resolution&&x.painting.highlight.y>=0&&x.painting.highlight.y<x.resolution&&(0===p.a.button.id?x.updatePixel(x.painting.highlight.x,x.painting.highlight.y,x.getCurrentColor()):2===p.a.button.id&&x.updatePixel(x.painting.highlight.x,x.painting.highlight.y,{r:0,g:0,b:0,a:0})),p.a.inBounds||(p.a.button.state=!1)),p.a.clicked=!1},clear:function(){x.pixels.forEach((function(e){e.color={r:0,g:0,b:0,a:0},e.graphic.tint=0,e.graphic.alpha=0}))},getPixel:function(e,t){return x.pixels[t*x.resolution+e]?x.pixels[t*x.resolution+e]:null},updatePixel:function(e,t,n){var i=x.getPixel(e,t);if(null===i)throw console.error(e,t,n),new Error("pause");i.color=n,x.buffer.push(i)},setPixel:function(e,t,n){x.getPixel(e,t)||(x.pixels[t*x.resolution+e]={color:n,graphic:null,x:e,y:t,index:t*x.resolution+e});var i=x.getPixel(e,t);return i.graphic=new f,x.showGrid&&i.graphic.lineStyle(1,0,1),i.graphic.beginFill(16777215),i.graphic.drawRect(0,0,x.scale,x.scale),i.graphic.endFill(),i.graphic.tint=v(n.r,n.g,n.b),i.graphic.alpha=n.a/255,i.graphic.x=e*x.scale,i.graphic.y=t*x.scale,i.color=null===n?{r:0,g:0,b:0,a:0}:n,x.app.stage.addChild(i.graphic),i},compose:function(){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=x.resolution,e.height=x.resolution;for(var n,i=t.createImageData(x.resolution,x.resolution),o=0;o<x.resolution;o++)for(var a=0;a<x.resolution;a++){var r=4*(a*x.resolution+o);n=x.getPixel(o,a).color,i.data[r]=n.r,i.data[r+1]=n.g,i.data[r+2]=n.b,i.data[r+3]=n.a}t.putImageData(i,0,0);var c=e.toDataURL("image/png"),l=document.createElement("a");l.href=c;var u=document.getElementById("image_name").value;l.setAttribute("download","".concat(u||"texture",".png")),l.click()},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;if(null!==x.app)for(;x.app.stage.children[0];)x.app.stage.removeChild(x.app.stage.children[0]);x.app=e,x.getCurrentColor(),x.resolution=t,x.width=e.view.width,x.height=e.view.height,x.scale=x.width/x.resolution,x.pixels=[],x.painting.highlight.graphic=new f,x.painting.highlight.graphic.lineStyle(2,16711680,1),x.painting.highlight.graphic.drawRect(0,0,x.scale,x.scale),x.painting.highlight.graphic.endFill();for(var n=0;n<x.resolution;n++)for(var i=0;i<x.resolution;i++)x.background[i*x.resolution+n]=new f,x.background[i*x.resolution+n].beginFill(16777215),x.background[i*x.resolution+n].drawRect(0,0,x.scale,x.scale),x.background[i*x.resolution+n].endFill(),x.background[i*x.resolution+n].tint=n%2===0&&i%2===1||n%2===1&&i%2===0?16777215:14540253,x.background[i*x.resolution+n].x=n*x.scale,x.background[i*x.resolution+n].y=i*x.scale,x.app.stage.addChild(x.background[i*x.resolution+n]),x.setPixel(n,i,{r:Math.floor(255*n/(x.resolution-1)),g:Math.floor((n+i)/2*255/(x.resolution-1)),b:Math.floor(255*i/(x.resolution-1)),a:Math.floor(255-Math.abs((255*n/(x.resolution-1)+255*i/(x.resolution-1))/2-128))});return x.app.stage.addChild(x.painting.highlight.graphic),x}},j=x,y=n(0);function O(e){return Object(y.jsx)("div",{id:e.id,className:"menu".concat(e.hidden?" hidden":""),children:e.content.map((function(e,t){return Object(y.jsx)("div",{className:"menu-item",children:e},t)}))})}n(36);var w=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).content=[{key:"File",id:"file_menu",value:Object(y.jsx)(O,{content:[Object(y.jsx)("div",{className:"menu-button",onClick:function(){return i.editor.compose()},children:"Download"}),Object(y.jsx)("div",{className:"menu-break"}),Object(y.jsxs)("div",{className:"menu-button",children:[Object(y.jsx)("label",{id:"debug_check_label",htmlFor:"debug-check",children:"Debug"}),Object(y.jsx)("input",{name:"debug-check",type:"checkbox",onChange:function(e){i.editor.debug=e.target.checked}})]})],id:"file_menu",hidden:!0})},{key:"Edit",id:"edit_menu",value:Object(y.jsx)(O,{content:[Object(y.jsx)("div",{className:"menu-button",onClick:function(){return i.editor.clear()},children:"Clear"})],id:"edit_menu",hidden:!0})},{key:"View",id:"view_menu",value:Object(y.jsx)(O,{content:[Object(y.jsx)("div",{className:"menu-button",onClick:function(){i.editor.showGrid=!i.editor.showGrid,i.editor.refresh=!0},children:"Toggle Grid"})],id:"view_menu",hidden:!0})}],i.componentDidMount=function(){var e=[];i.content.forEach((function(t){return e.push(document.getElementById(t.id))})),document.addEventListener("click",(function(t){e.forEach((function(e){e.parentElement.contains(t.target)||e.classList.add("hidden")}))}))},i.render=function(){return Object(y.jsx)("div",{className:"texture-editor-ribbon",children:i.content.map((function(e){return Object(y.jsxs)("div",{className:"ribbon-menu",children:[Object(y.jsx)("div",{className:"ribbon-menu-button",onClick:function(){document.getElementById(e.id).classList.toggle("hidden")},children:e.key}),e.value]},e.key)}))})},i.editor=e.editor,i.setResolution=i.setResolution.bind(Object(u.a)(i)),i}return Object(l.a)(n,[{key:"setResolution",value:function(e){e.preventDefault();var t=Number(document.getElementById("resolution_input").value);isNaN(t)||t%16===0&&t>0&&t<=128&&(this.editor=this.editor.create(this.editor.app,t))}}]),n}(o.a.Component),k=(n(37),n.p+"static/media/pencil.34dc5e45.svg"),C=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).brushes=[{key:"pencil",icon:k},{key:"paint",icon:k}],i.render=function(){return Object(y.jsx)("div",{className:"brushes-container",children:i.brushes.map((function(e){return Object(y.jsx)("img",{src:e.icon,className:"brush-icon",id:"".concat(e.key,"_brush"),alt:e.key,onClick:function(){return i.editor.setBrush(e.key)}},e.key)}))})},i.editor=e.editor,i}return n}(o.a.Component),_=(n(38),function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(e){var i;return Object(c.a)(this,n),(i=t.call(this,e)).previewElem=null,i.updatePreview=function(){var e=i.fetchBrush().fill;i.previewElem.style.backgroundColor="rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(e.a/255,")")},i.render=function(){return Object(y.jsxs)("div",{className:"side-bar-container",children:[Object(y.jsx)("div",{className:"debug",id:"debug"}),Object(y.jsxs)("div",{className:"color-picker-container",children:[Object(y.jsx)("div",{className:"container-group",id:"color_picker_preview_container",children:Object(y.jsx)("div",{className:"color-picker-preview",id:"color_picker_preview"})}),Object(y.jsx)("div",{className:"collapsable-container-group container-group",id:"color_picker_controls_container",children:["r","g","b","a"].map((function(e){return Object(y.jsxs)("div",{className:"rgb-input-container",children:[Object(y.jsx)("label",{htmlFor:"rgb_".concat(e),className:"rgb-input-label",children:e}),Object(y.jsx)("input",{name:"rgb_".concat(e),id:"rgb_".concat(e),type:"text",className:"rgb-input-field",placeholder:"0",onChange:function(e){i.updateColor(e),i.updatePreview()},onKeyPress:function(e){e.key.match(/[0-9]/)||e.preventDefault()},defaultValue:"a"===e?255:""},e),Object(y.jsx)("input",{name:"rgb_".concat(e,"_slider"),type:"range",min:"0",max:"255",className:"rgb-input-slider",onChange:function(t){document.getElementById("rgb_".concat(e)).value=t.target.value,i.updateColor(t),i.updatePreview()},defaultValue:"a"===e?255:0},"".concat(e,"_slider"))]},"rgb_".concat(e,"_div"))}))}),Object(y.jsx)("div",{className:"collapsable-container-group-trigger",id:"collapse_color_picker",onClick:function(){var e=document.getElementById("color_picker_controls_container");e.style.maxHeight=e.style.maxHeight?null:e.scrollHeight+"px"}})]})]})},i.updateColor=e.updateColor,i.fetchBrush=e.fetchBrush,i.updatePreview=i.updatePreview.bind(Object(u.a)(i)),i}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.previewElem=document.getElementById("color_picker_preview"),this.updatePreview()}}]),n}(o.a.Component)),B=(n(39),null),E=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).state={app:null,canvas:null,doBoundUpdate:!0,editor:j},e.getCanvas=function(){var t=document.getElementById("texture_editor_wrapper"),n=t.getBoundingClientRect().height<t.getBoundingClientRect().width?.9*t.getBoundingClientRect().height:.9*t.getBoundingClientRect().width,i=e.state;i.app=new h.a({width:n,height:n}),i.editor=j.create(i.app,16),i.app.view.oncontextmenu=function(e){e.preventDefault(),e.stopPropagation()},i.app.view.id="editor",i.canvas=i.editor.startup(),t.appendChild(i.canvas),e.setState(i)},e.componentDidMount=function(){e.getCanvas(),e.state.editor.updateBounds(),e.state.canvas.addEventListener("mousemove",(function(t){p.a.position.old={x:Math.floor(p.a.position.x),y:Math.floor(p.a.position.y)},p.a.position.x=Math.floor(t.clientX-e.state.editor.bounds.left),p.a.position.y=Math.floor(t.clientY-e.state.editor.bounds.top),p.a.moving=!0,B&&clearTimeout(B),B=setTimeout((function(){p.a.position.old={x:Math.floor(p.a.position.x),y:Math.floor(p.a.position.y)},p.a.moving=!1}),30)})),e.state.canvas.addEventListener("mousedown",(function(e){p.a.button.state=!0,p.a.button.id=e.button})),e.state.canvas.addEventListener("mouseup",(function(){p.a.button.state=!1,p.a.button.id=null})),e.state.canvas.addEventListener("mouseleave",(function(){return p.a.inBounds=!1})),e.state.canvas.addEventListener("mouseenter",(function(){return p.a.inBounds=!0})),e.state.canvas.addEventListener("click",(function(){return p.a.clicked=!0})),window.addEventListener("resize",(function(){e.state.editor.updateBounds()}))},e.render=function(){return Object(y.jsxs)("div",{className:"editor-container",children:[Object(y.jsx)(C,{editor:e.state.editor}),Object(y.jsxs)("div",{className:"texture-editor-container",id:"texture_editor_container",children:[Object(y.jsx)(w,{editor:e.state.editor}),Object(y.jsx)("div",{className:"texture-editor-wrapper",id:"texture_editor_wrapper"}),Object(y.jsxs)("div",{className:"texture-editor-controls",children:[Object(y.jsx)("label",{htmlFor:"texture-name-input",children:"File name:"}),Object(y.jsx)("input",{type:"text",name:"texture-name-input",id:"image_name",defaultValue:"texture",onKeyPress:function(e){e.key.match(/[\w\d.()]/)||e.preventDefault()}})]})]}),Object(y.jsx)(_,{updateColor:e.updateColor,fetchBrush:e.fetchBrush})]})},e.updateColor=e.updateColor.bind(Object(u.a)(e)),e.fetchBrush=e.fetchBrush.bind(Object(u.a)(e)),e}return Object(l.a)(n,[{key:"fetchBrush",value:function(){return this.state.editor.brush}},{key:"updateColor",value:function(e){var t=this.state;e.target.value>255&&(e.target.value=255);var n=e.target.name.match(/rgb_([rgba])/)[1];t.editor.brush.fill[n]=""===e.target.value?0:e.target.value,t.editor.getCurrentColor(),this.setState(t)}}]),n}(o.a.Component);var N=function(){return Object(y.jsx)("div",{className:"App",children:Object(y.jsx)(E,{})})},P=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,42)).then((function(t){var n=t.getCLS,i=t.getFID,o=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),i(e),o(e),a(e),r(e)}))},M=(n(40),function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(c.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(e=t.call.apply(t,[this].concat(o))).render=function(){return Object(y.jsx)("div",{className:"nav-bar"})},e}return n}(o.a.Component));r.a.render(Object(y.jsxs)(o.a.StrictMode,{children:[Object(y.jsx)("header",{children:Object(y.jsx)(M,{})}),Object(y.jsx)("main",{children:Object(y.jsx)(N,{})}),Object(y.jsxs)("footer",{children:[Object(y.jsx)("div",{children:"Built by ChrisOfNormandy."}),Object(y.jsxs)("div",{children:["Join ",Object(y.jsx)("a",{href:"https://discord.gg/EW5JsGJfdt",children:"Discord"})]})]})]}),document.getElementById("root")),P()}},[[41,1,2]]]);
//# sourceMappingURL=main.bff59291.chunk.js.map