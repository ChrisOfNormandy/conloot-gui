(this["webpackJsonpconloot-gui"]=this["webpackJsonpconloot-gui"]||[]).push([[0],{1:function(e,t){var i={position:{x:0,y:0,old:{x:0,y:0}},button:{state:!1,id:0,origin:{x:null,y:null}},displacement:function(){return{x:null===i.position.old.x?0:i.position.x-i.position.old.x,y:null===i.position.old.y?0:i.position.y-i.position.old.y}},getPosition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?{x:i.position.x,y:i.position.y}:{x:i.position.x-e.x,y:i.position.y-e.y}},inBounds:!1,moving:!1,clicked:!1};e.exports=i},24:function(e,t,i){},25:function(e,t,i){},36:function(e,t,i){},37:function(e,t,i){},38:function(e,t,i){},39:function(e,t,i){},40:function(e,t,i){},41:function(e,t,i){"use strict";i.r(t);var n=i(2),a=i.n(n),o=i(16),r=i.n(o),c=(i(24),i(25),i(3)),l=i(9),s=i(7),u=i(5),h=i(4),d=i(8),g=i(1),p=i.n(g);function b(e){var t=Number(e).toString(16);return 1===t.length?"0".concat(t):t}function f(e,t,i){return Number("0x".concat(b(e)).concat(b(t)).concat(b(i)))}function m(e,t,i){return Math.floor(t*i+e*(1-i))}function v(e,t){return 0===e.a?t:0===t.a?e:{r:m(e.r,t.r,t.a/255),g:m(e.g,t.g,t.a/255),b:m(e.b,t.b,t.a/255),a:e.a+t.a>255?255:e.a+t.a}}var x=d.c.shared,j=d.b,y={app:null,brush:{style:"pencil",fill:{r:0,g:0,b:0,a:255},size:1},resolution:0,background:[],width:0,height:0,scale:0,debug:!1,debugElem:document.getElementById("debug"),pixels:[],showGrid:!1,refresh:!1,doBoundUpdate:!0,bounds:null,type:"WebGL",getCurrentColor:function(){return{r:y.brush.fill.r,g:y.brush.fill.g,b:y.brush.fill.b,a:y.brush.fill.a}},setBrush:function(e){y.brush.style=e},setBrushSize:function(e){y.brush.size=e},setBrushFill:function(e){y.brush.fill=e,y.painting.highlight.graphic.tint=f(e.r,e.g,e.b),y.painting.highlight.graphic.alpha=e.a/255},updateBounds:function(){var e=y.app.view.getBoundingClientRect();y.bounds={x:e.x,y:e.y,left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width,height:e.height},y.doBoundUpdate=!1},startup:function(){return y.onReady((function(){return y.app.ticker.add((function(){return y.draw()}))})),y.app.view},onReady:function(e){console.log("App ready. Loading."),d.d.isWebGLSupported()||(y.type="canvas"),d.d.sayHello(y.type),x.load(e)},updateDebug:function(){if(null===y.debugElem&&(y.debugElem=document.getElementById("debug")),y.debug){var e=p.a.getPosition(),t=Math.floor(e.x/y.scale),i=Math.floor(e.y/y.scale),n=y.getPixel(t,i);null!==n&&(y.debugElem.innerHTML="Mouse: ".concat(JSON.stringify(e)," --\x3e ").concat(t,", ").concat(i,"<br />")+"Brush:<br />"+" - Color: ".concat(JSON.stringify(y.brush.fill),"<br />")+" - Pos: ".concat(y.painting.highlight.x,", ").concat(y.painting.highlight.y," --\x3e ").concat(y.painting.highlight.x+y.brush.size-1,", ").concat(y.painting.highlight.y+y.brush.size-1,"<br />")+" - Hex: 0x".concat(b(y.brush.fill.r)).concat(b(y.brush.fill.g)).concat(b(y.brush.fill.b),"<br />")+" - Style: ".concat(y.brush.style,"<br />")+"Buffer: ".concat(y.buffer.length,"<br />")+"Hover: ".concat(JSON.stringify(n.color),"<br />")+" - Tint:".concat(n.graphic.tint,"<br />")+" - Alpha: ".concat(n.graphic.alpha))}else y.debugElem.innerHTML=""},buffer:[],painting:{mousePos:null,highlight:{x:0,y:0,graphic:null,focus:null},old:{x:0,y:0}},draw:function(){if(y.updateDebug(),y.refresh)return y.pixels.forEach((function(e){y.app.stage.removeChild(e.graphic),y.setPixel(e.x,e.y,e.color)})),y.refresh=!1,y.app.stage.removeChild(y.painting.highlight.graphic),void y.app.stage.addChild(y.painting.highlight.graphic);if(y.buffer.forEach((function(e,t){e.graphic.tint=f(e.color.r,e.color.g,e.color.b),e.graphic.alpha=e.color.a/255,e.changed?p.a.button.state||(e.changed=!1):y.buffer.splice(t,1)})),y.painting.mousePos=p.a.getPosition(),y.painting.old.x=y.painting.highlight.x,y.painting.old.y=y.painting.highlight.y,y.painting.highlight.x=Math.floor((y.painting.mousePos.x-(y.brush.size-1)/2*y.scale)/y.scale),y.painting.highlight.y=Math.floor((y.painting.mousePos.y-(y.brush.size-1)/2*y.scale)/y.scale),y.painting.highlight.graphic.x=y.painting.highlight.x*y.scale,y.painting.highlight.graphic.y=y.painting.highlight.y*y.scale,y.painting.highlight.graphic.width=y.scale*y.brush.size,y.painting.highlight.graphic.height=y.scale*y.brush.size,p.a.button.state){if(0===p.a.button.id)for(var e=y.painting.highlight.x<0?0:y.painting.highlight.x;e<y.painting.highlight.x+y.brush.size&&e<y.resolution;e++)for(var t=y.painting.highlight.y<0?0:y.painting.highlight.y;t<y.painting.highlight.y+y.brush.size&&t<y.resolution;t++)switch(y.brush.style){case"paint":var i=y.getCurrentColor();i.a=Math.floor(255*(1-(n={x:y.painting.highlight.x+Math.floor(y.brush.size/2),y:y.painting.highlight.y+Math.floor(y.brush.size/2)},a={x:e,y:t},(Math.abs(a.x-n.x)+Math.abs(a.y-n.y))/Math.round(y.brush.size/2)))),i.a<0&&(i.a=0),y.updatePixel(e,t,i,y.painting.old.x!==y.painting.highlight.x||y.painting.old.y!==y.painting.highlight.y);break;default:y.updatePixel(e,t,y.getCurrentColor())}else 2===p.a.button.id&&y.updatePixel(y.painting.highlight.x,y.painting.highlight.y,{r:0,g:0,b:0,a:0});p.a.inBounds||(p.a.button.state=!1)}var n,a;p.a.clicked=!1},clear:function(){y.pixels.forEach((function(e){e.color={r:0,g:0,b:0,a:0},e.graphic.tint=0,e.graphic.alpha=0}))},getPixel:function(e,t){return y.pixels[t*y.resolution+e]?y.pixels[t*y.resolution+e]:null},updatePixel:function(e,t,i){var n=arguments.length>3&&void 0!==arguments[3]&&arguments[3],a=y.getPixel(e,t);null===a||a.changed&&!n||(a.color=v(a.color,i),a.changed=!0,y.buffer.push(a))},setPixel:function(e,t,i){y.getPixel(e,t)||(y.pixels[t*y.resolution+e]={color:i,graphic:null,x:e,y:t,index:t*y.resolution+e,changed:!1});var n=y.getPixel(e,t);return n.graphic=new j,y.showGrid&&n.graphic.lineStyle(1,0,1),n.graphic.beginFill(16777215),n.graphic.drawRect(0,0,y.scale,y.scale),n.graphic.endFill(),n.graphic.tint=f(i.r,i.g,i.b),n.graphic.alpha=i.a/255,n.graphic.x=e*y.scale,n.graphic.y=t*y.scale,n.color=null===i?{r:0,g:0,b:0,a:0}:i,y.app.stage.addChild(n.graphic),n},compose:function(){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=y.resolution,e.height=y.resolution;for(var i,n=t.createImageData(y.resolution,y.resolution),a=0;a<y.resolution;a++)for(var o=0;o<y.resolution;o++){var r=4*(o*y.resolution+a);i=y.getPixel(a,o).color,n.data[r]=i.r,n.data[r+1]=i.g,n.data[r+2]=i.b,n.data[r+3]=i.a}t.putImageData(n,0,0);var c=e.toDataURL("image/png"),l=document.createElement("a");l.href=c;var s=document.getElementById("image_name").value;l.setAttribute("download","".concat(s||"texture",".png")),l.click()},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;if(null!==y.app)for(;y.app.stage.children[0];)y.app.stage.removeChild(y.app.stage.children[0]);y.app=e,y.getCurrentColor(),y.resolution=t,y.width=e.view.width,y.height=e.view.height,y.scale=y.width/y.resolution,y.pixels=[],y.painting.highlight.graphic=new j,y.painting.highlight.graphic.beginFill(16777215),y.painting.highlight.graphic.drawRect(0,0,y.scale+3,y.scale+3),y.painting.highlight.graphic.endFill(),y.painting.highlight.graphic.tint=f(y.brush.fill.r,y.brush.fill.g,y.brush.fill.b),y.painting.highlight.graphic.alpha=y.brush.fill.a/255;for(var i=0;i<y.resolution;i++)for(var n=0;n<y.resolution;n++)y.background[n*y.resolution+i]=new j,y.background[n*y.resolution+i].beginFill(16777215),y.background[n*y.resolution+i].drawRect(0,0,y.scale,y.scale),y.background[n*y.resolution+i].endFill(),y.background[n*y.resolution+i].tint=i%2===0&&n%2===1||i%2===1&&n%2===0?16777215:14540253,y.background[n*y.resolution+i].x=i*y.scale,y.background[n*y.resolution+i].y=n*y.scale,y.app.stage.addChild(y.background[n*y.resolution+i]),y.setPixel(i,n,{r:Math.floor(255*i/(y.resolution-1)),g:Math.floor((i+n)/2*255/(y.resolution-1)),b:Math.floor(255*n/(y.resolution-1)),a:Math.floor(255-Math.abs((255*i/(y.resolution-1)+255*n/(y.resolution-1))/2-128))});return y.app.stage.addChild(y.painting.highlight.graphic),y}},O=y,w=i(0);function k(e){return Object(w.jsx)("div",{id:e.id,className:"menu".concat(e.hidden?" hidden":""),children:e.content.map((function(e,t){return Object(w.jsx)("div",{className:"menu-item",children:e},t)}))})}i(36);var C=function(e){Object(u.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(c.a)(this,i),(n=t.call(this,e)).content=[{key:"File",id:"file_menu",value:Object(w.jsx)(k,{content:[Object(w.jsx)("div",{className:"menu-button",onClick:function(){return n.editor.compose()},children:"Download"}),Object(w.jsx)("div",{className:"menu-break"}),Object(w.jsxs)("div",{className:"menu-button",children:[Object(w.jsx)("label",{id:"debug_check_label",htmlFor:"debug-check",children:"Debug"}),Object(w.jsx)("input",{name:"debug-check",type:"checkbox",onChange:function(e){n.editor.debug=e.target.checked}})]})],id:"file_menu",hidden:!0})},{key:"Edit",id:"edit_menu",value:Object(w.jsx)(k,{content:[Object(w.jsx)("div",{className:"menu-button",onClick:function(){return n.editor.clear()},children:"Clear"})],id:"edit_menu",hidden:!0})},{key:"View",id:"view_menu",value:Object(w.jsx)(k,{content:[Object(w.jsx)("div",{className:"menu-button",onClick:function(){n.editor.showGrid=!n.editor.showGrid,n.editor.refresh=!0},children:"Toggle Grid"})],id:"view_menu",hidden:!0})}],n.componentDidMount=function(){var e=[];n.content.forEach((function(t){return e.push(document.getElementById(t.id))})),document.addEventListener("click",(function(t){e.forEach((function(e){e.parentElement.contains(t.target)||e.classList.add("hidden")}))}))},n.render=function(){return Object(w.jsx)("div",{className:"texture-editor-ribbon",children:n.content.map((function(e){return Object(w.jsxs)("div",{className:"ribbon-menu",children:[Object(w.jsx)("div",{className:"ribbon-menu-button",onClick:function(){document.getElementById(e.id).classList.toggle("hidden")},children:e.key}),e.value]},e.key)}))})},n.editor=e.editor,n.setResolution=n.setResolution.bind(Object(s.a)(n)),n}return Object(l.a)(i,[{key:"setResolution",value:function(e){e.preventDefault();var t=Number(document.getElementById("resolution_input").value);isNaN(t)||t%16===0&&t>0&&t<=128&&(this.editor=this.editor.create(this.editor.app,t))}}]),i}(a.a.Component),_=(i(37),i.p+"static/media/pencil.34dc5e45.svg"),B=i.p+"static/media/paintbrush.3b3671d0.svg",N=function(e){Object(u.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(c.a)(this,i),(n=t.call(this,e)).brushes=[{key:"pencil",icon:_},{key:"paint",icon:B}],n.render=function(){return Object(w.jsx)("div",{className:"brushes-container",children:n.brushes.map((function(e){return Object(w.jsx)("img",{src:e.icon,className:"brush-icon",id:"".concat(e.key,"_brush"),alt:e.key,onClick:function(){return n.editor.setBrush(e.key)}},e.key)}))})},n.editor=e.editor,n}return i}(a.a.Component),E=(i(38),function(e){Object(u.a)(i,e);var t=Object(h.a)(i);function i(e){var n;return Object(c.a)(this,i),(n=t.call(this,e)).previewElem=null,n.updatePreview=function(){var e=n.fetchBrush().fill;n.previewElem.style.backgroundColor="rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(e.a/255,")")},n.render=function(){return Object(w.jsxs)("div",{className:"side-bar-container",children:[Object(w.jsx)("div",{className:"debug",id:"debug"}),Object(w.jsxs)("div",{className:"color-picker-container",children:[Object(w.jsxs)("div",{className:"container-group",id:"color_picker_preview_container",children:[Object(w.jsx)("div",{className:"color-picker-preview",id:"color_picker_preview"}),Object(w.jsx)("div",{className:"brush-size-preview",id:"brush_size_preview"}),Object(w.jsx)("input",{className:"brush-size-input",id:"brush_size_input",type:"text",defaultValue:1,onChange:function(e){n.fetchBrush().size=Number(e.target.value)},onKeyPress:function(e){null===e.key.match(/[0-9]/)&&e.preventDefault()}})]}),Object(w.jsx)("div",{className:"collapsable-container-group container-group",id:"color_picker_controls_container",children:["r","g","b","a"].map((function(e){return Object(w.jsxs)("div",{className:"rgb-input-container",children:[Object(w.jsx)("label",{htmlFor:"rgb_".concat(e),className:"rgb-input-label",children:e}),Object(w.jsx)("input",{name:"rgb_".concat(e),id:"rgb_".concat(e),type:"text",className:"rgb-input-field",placeholder:"0",onChange:function(e){n.updateColor(e),n.updatePreview()},onKeyPress:function(e){e.key.match(/[0-9]/)||e.preventDefault()},defaultValue:"a"===e?255:""},e),Object(w.jsx)("input",{name:"rgb_".concat(e,"_slider"),type:"range",min:"0",max:"255",className:"rgb-input-slider",onChange:function(t){document.getElementById("rgb_".concat(e)).value=t.target.value,n.updateColor(t),n.updatePreview()},defaultValue:"a"===e?255:0},"".concat(e,"_slider"))]},"rgb_".concat(e,"_div"))}))}),Object(w.jsx)("div",{className:"collapsable-container-group-trigger",id:"collapse_color_picker",onClick:function(){var e=document.getElementById("color_picker_controls_container");e.style.maxHeight=e.style.maxHeight?null:e.scrollHeight+"px"}})]})]})},n.updateColor=e.updateColor,n.fetchBrush=e.fetchBrush,n.updatePreview=n.updatePreview.bind(Object(s.a)(n)),n}return Object(l.a)(i,[{key:"componentDidMount",value:function(){this.previewElem=document.getElementById("color_picker_preview"),this.updatePreview()}}]),i}(a.a.Component)),P=(i(39),null),M=function(e){Object(u.a)(i,e);var t=Object(h.a)(i);function i(){var e;return Object(c.a)(this,i),(e=t.call(this)).state={app:null,canvas:null,doBoundUpdate:!0,editor:O},e.getCanvas=function(){var t=document.getElementById("texture_editor_wrapper"),i=t.getBoundingClientRect().height<t.getBoundingClientRect().width?.9*t.getBoundingClientRect().height:.9*t.getBoundingClientRect().width,n=e.state;n.app=new d.a({width:i,height:i}),n.editor=O.create(n.app,16),n.app.view.oncontextmenu=function(e){e.preventDefault(),e.stopPropagation()},n.app.view.id="editor",n.canvas=n.editor.startup(),t.appendChild(n.canvas),e.setState(n)},e.componentDidMount=function(){e.getCanvas(),e.state.editor.updateBounds(),e.state.canvas.addEventListener("mousemove",(function(t){p.a.position.old={x:Math.floor(p.a.position.x),y:Math.floor(p.a.position.y)},p.a.position.x=Math.floor(t.clientX-e.state.editor.bounds.left),p.a.position.y=Math.floor(t.clientY-e.state.editor.bounds.top),p.a.moving=!0,P&&clearTimeout(P),P=setTimeout((function(){p.a.position.old={x:Math.floor(p.a.position.x),y:Math.floor(p.a.position.y)},p.a.moving=!1}),30)})),e.state.canvas.addEventListener("mousedown",(function(e){p.a.button.state=!0,p.a.button.id=e.button})),e.state.canvas.addEventListener("mouseup",(function(){p.a.button.state=!1,p.a.button.id=null})),e.state.canvas.addEventListener("mouseleave",(function(){return p.a.inBounds=!1})),e.state.canvas.addEventListener("mouseenter",(function(){return p.a.inBounds=!0})),e.state.canvas.addEventListener("click",(function(){return p.a.clicked=!0})),window.addEventListener("resize",(function(){e.state.editor.updateBounds()}))},e.render=function(){return Object(w.jsxs)("div",{className:"editor-container",children:[Object(w.jsx)(N,{editor:e.state.editor}),Object(w.jsxs)("div",{className:"texture-editor-container",id:"texture_editor_container",children:[Object(w.jsx)(C,{editor:e.state.editor}),Object(w.jsx)("div",{className:"texture-editor-wrapper",id:"texture_editor_wrapper"}),Object(w.jsxs)("div",{className:"texture-editor-controls",children:[Object(w.jsx)("label",{htmlFor:"texture-name-input",children:"File name:"}),Object(w.jsx)("input",{type:"text",name:"texture-name-input",id:"image_name",defaultValue:"texture",onKeyPress:function(e){e.key.match(/[\w\d.()]/)||e.preventDefault()}})]})]}),Object(w.jsx)(E,{updateColor:e.updateColor,fetchBrush:e.fetchBrush})]})},e.updateColor=e.updateColor.bind(Object(s.a)(e)),e.fetchBrush=e.fetchBrush.bind(Object(s.a)(e)),e}return Object(l.a)(i,[{key:"fetchBrush",value:function(){return this.state.editor.brush}},{key:"updateColor",value:function(e){var t=this.state;e.target.value>255&&(e.target.value=255);var i=t.editor.getCurrentColor();i[e.target.name.match(/rgb_([rgba])/)[1]]=""===e.target.value?0:Number(e.target.value),t.editor.setBrushFill(i),this.setState(t)}}]),i}(a.a.Component);var z=function(){return Object(w.jsx)("div",{className:"App",children:Object(w.jsx)(M,{})})},L=function(e){e&&e instanceof Function&&i.e(3).then(i.bind(null,42)).then((function(t){var i=t.getCLS,n=t.getFID,a=t.getFCP,o=t.getLCP,r=t.getTTFB;i(e),n(e),a(e),o(e),r(e)}))},D=(i(40),function(e){Object(u.a)(i,e);var t=Object(h.a)(i);function i(){var e;Object(c.a)(this,i);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).render=function(){return Object(w.jsx)("div",{className:"nav-bar"})},e}return i}(a.a.Component));r.a.render(Object(w.jsxs)(a.a.StrictMode,{children:[Object(w.jsx)("header",{children:Object(w.jsx)(D,{})}),Object(w.jsx)("main",{children:Object(w.jsx)(z,{})}),Object(w.jsxs)("footer",{children:[Object(w.jsx)("div",{children:"Built by ChrisOfNormandy."}),Object(w.jsxs)("div",{children:["Join ",Object(w.jsx)("a",{href:"https://discord.gg/EW5JsGJfdt",children:"Discord"})]})]})]}),document.getElementById("root")),L()}},[[41,1,2]]]);
//# sourceMappingURL=main.6ffc0fdc.chunk.js.map