(this["webpackJsonpconloot-gui"]=this["webpackJsonpconloot-gui"]||[]).push([[0],{21:function(e,t,n){},22:function(e,t,n){},33:function(e,t,n){},34:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),i=n(13),a=n.n(i),s=(n(21),n(22),n(2)),c=n(7),l=n(3),u=n(5),d=n(4),h=n(6),p={position:{x:0,y:0,old:{x:0,y:0},document:{x:0,y:0}},button:{state:!1,id:0,origin:{x:null,y:null}},displacement:function(){return{x:null===p.position.old.x?0:p.position.x-p.position.old.x,y:null===p.position.old.y?0:p.position.y-p.position.old.y}},getPosition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?{x:p.position.x,y:p.position.y}:{x:p.position.x-e.x,y:p.position.y-e.y}},inBounds:!1,moving:!1,clicked:!1},b=p;function g(e){var t=Number(e).toString(16);return 1===t.length?"0".concat(t):t}function m(e){return parseInt(e,16)}function f(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Number("0x".concat(g(e)).concat(g(t)).concat(g(n)).concat(null!==r?g(r):""))}function v(e){return f(e.r,e.g,e.b)}function y(e,t,n){return Math.floor(t*n+e*(1-n))}function x(e,t){return 0===e.a?t:0!==t.a&&t?{r:y(e.r,t.r,t.a/255),g:y(e.g,t.g,t.a/255),b:y(e.b,t.b,t.a/255),a:e.a+t.a>255?255:e.a+t.a}:e}var j=function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Object(s.a)(this,e),this.visable=!0,this.opacity=255,this.pixels=[],this.clear=function(){n.pixels.forEach((function(e){return n.setPixel(e.x,e.y,null)}))},this.getPixel=function(e,t){return n.visable?n.pixels[t*n.resolution+e]?n.pixels[t*n.resolution+e]:null:{x:e,y:t,changed:n.pixels[t*n.resolution+e].changed,color:{r:0,g:0,b:0,a:0}}},this.toggle=function(){n.visable=!n.visable,n.editor.refresh=!0},this.updatePixel=function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=n.getPixel(e,t);return null===a||a.changed&&!o?null:(null===i?(a.color=null===r?{r:0,g:0,b:0,a:0}:x(a.color,r),a.changed=!0):a.color.a=a.color.a/255*i,a)},this.setPixel=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return n.pixels[t*n.resolution+e]={color:null===r?{r:0,g:0,b:0,a:0}:r,x:e,y:t,changed:!1},n.pixels[t*n.resolution+e]},this.editor=t,this.resolution=t.resolution,null===r){var o=this.editor.layers.cache.map((function(e){return e.name}));if(o.length){var i=1;for(this.name="Layer ".concat(i);o.includes(this.name);)this.name="Layer ".concat(i),i++}else this.name="Layer 1"}else this.name=r;for(var a=0;a<t.resolution;a++)for(var c=0;c<t.resolution;c++)this.setPixel(a,c)};var O=h.d.shared,w=h.c,C={app:null,display:{backgroundGroup:new h.b,imageGroup:new h.b,gridGroup:new h.b},resolution:0,refresh:!1,width:0,height:0,scale:0,debug:{enabled:!0,element:document.getElementById("debug"),update:function(){var e=b.getPosition(),t=Math.floor(e.x/C.scale),n=Math.floor(e.y/C.scale);C.image.pixels[n*C.resolution+t]&&(C.debug.element.innerHTML="Mouse: ".concat(JSON.stringify(e)," --\x3e ").concat(t,", ").concat(n,"<br />")+" - ".concat(JSON.stringify(b.position.document),"<br />")+" - ".concat(C.scale,"<br />")+"Brush:<br />"+" - Pos: ".concat(C.brush.cursor.position.x,", ").concat(C.brush.cursor.position.y," --\x3e ").concat(C.brush.cursor.position.x+C.brush.size-1,", ").concat(C.brush.cursor.position.y+C.brush.size-1,"<br />")+" - Style: ".concat(C.brush.style,"<br />")+"Cursor: ".concat(JSON.stringify(C.brush.cursor.position),"<br />")+"Zoom: ".concat(C.zoomSettings.width,", ").concat(C.zoomSettings.height," | ").concat(C.zoomSettings.value,"<br />")+" - ".concat(JSON.stringify(C.zoomSettings.offset)))}},offset:{x:0,y:0,dx:0,dy:0},zoomSettings:{scale:0,width:0,height:0,offset:{x:0,y:0},value:0},brush:{style:"pencil",fill:{r:0,g:0,b:0,a:255},size:1,mousePos:null,cursor:{position:{x:0,y:0,old:{x:0,y:0}},graphic:null,focus:null},preview:null,getStyle:function(){return C.brush.style},setStyle:function(e){switch(e){case"eraser":C.brush.cursor.graphic.tint=16777215,C.brush.cursor.graphic.alpha=1;break;case"fill":case"color-picker":C.brush.cursor.graphic.alpha=0;break;default:C.brush.cursor.graphic.tint=f(C.brush.fill.r,C.brush.fill.g,C.brush.fill.b),C.brush.cursor.graphic.alpha=C.brush.fill.a/255}C.brush.style=e},getColor:function(){return{r:C.brush.fill.r,g:C.brush.fill.g,b:C.brush.fill.b,a:C.brush.fill.a}},setColor:function(e){C.brush.cursor.graphic.tint=f(e.r,e.g,e.b),C.brush.cursor.graphic.alpha=e.a/255,C.brush.fill=e},getSize:function(){return C.brush.size},setSize:function(e){C.brush.size=e},updateCursor:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];C.brush.mousePos=b.getPosition(),C.brush.mousePos.x-=C.zoomSettings.offset.x+C.offset.x,C.brush.mousePos.y-=C.zoomSettings.offset.y+C.offset.y,C.brush.cursor.position.old.x=C.brush.cursor.position.x,C.brush.cursor.position.old.y=C.brush.cursor.position.y,C.brush.cursor.position.x=Math.floor((C.brush.mousePos.x-(C.brush.size-1)/2*C.scale)/C.scale),C.brush.cursor.position.y=Math.floor((C.brush.mousePos.y-(C.brush.size-1)/2*C.scale)/C.scale),C.brush.cursor.position.old.x===C.brush.cursor.position.x&&C.brush.cursor.position.old.y===C.brush.cursor.position.y||(C.brush.cursor.graphic.x=C.brush.cursor.position.x*C.scale+C.zoomSettings.offset.x+C.offset.x,C.brush.cursor.graphic.y=C.brush.cursor.position.y*C.scale+C.zoomSettings.offset.y+C.offset.y),e&&(C.brush.cursor.graphic.tint=f(C.brush.fill.r,C.brush.fill.g,C.brush.fill.b),C.brush.cursor.graphic.alpha=C.brush.fill.a/255),t&&(C.brush.cursor.graphic.width=C.scale*C.brush.size,C.brush.cursor.graphic.height=C.scale*C.brush.size)}},layers:{cache:[],active:0,get:function(e){return C.layers.cache[e]},getActive:function(){return C.layers.cache[C.layers.active]},add:function(){var e=C.layers.cache.length,t=new j(_);return C.layers.cache.push(t),C.layers.active=e,t},remove:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return C.layers.cache.splice(e,1),C.layers.reload(),C.layers},move:function(e,t){var n=C.layers.cache.splice(e,1)[0];return C.layers.cache.splice(t,0,n),C.layers.reload(),n},clear:function(){C.layers.cache=[]},toggle:function(e){C.layers.cache[e].visable=!C.layers.cache[e].visable,C.layers.reload()},reload:function(){C.refresh=!0}},bounds:{doUpdate:!1,value:null,update:function(){return C.bounds.value=C.app.view.getBoundingClientRect(),C.bounds.doUpdate=!1,C.bounds.value}},startup:function(){return C.onReady((function(){return C.app.ticker.add((function(){return C.draw()}))})),C.app.view},onReady:function(e){console.log("App ready. Loading."),O.load(e)},grid:{enabled:!1,show:function(){C.app.stage.removeChild(C.display.gridGroup),C.app.stage.addChild(C.display.gridGroup)},toggle:function(){return C.grid.enabled=!C.grid.enabled,C.grid.enabled?C.app.stage.addChild(C.display.gridGroup):C.app.stage.removeChild(C.display.gridGroup),C.grid.enabled}},draw:function(){if(null!==C.debug.element){if(C.debug.enabled?(C.debug.element.classList.contains("hidden")&&C.debug.element.classList.remove("hidden"),C.debug.update()):C.debug.element.classList.contains("hidden")||C.debug.element.classList.add("hidden"),C.refresh)return C.image.pixels.forEach((function(e){C.image.updatePixel(e.x,e.y),C.app.stage.removeChild(e.graphic),C.app.stage.addChild(e.graphic)})),C.app.stage.removeChild(C.brush.cursor.graphic),C.app.stage.addChild(C.brush.cursor.graphic),C.grid.enabled&&C.grid.show(),void(C.refresh=!1);C.image.buffer.forEach((function(e,t){C.image.updatePixel(e.x,e.y),e.changed?b.button.state||(e.changed=!1):C.image.buffer.splice(t,1)})),C.brush.updateCursor();var e,t,n,r,o,i,a=C.layers.getActive();if(a)if(b.clicked)switch(C.brush.style){case"fill":var s={x:C.brush.cursor.position.x,y:C.brush.cursor.position.y},c={color:a.getPixel(s.x,s.y).color};t=C.brush.getColor(),n=!1,r=null;var l=[];!function o(i){var s=a.getPixel(i.x,i.y);null===s||!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return Math.abs(e.r-t.r)<=n&&Math.abs(e.g-t.g)<=n&&Math.abs(e.b-t.b)<=n&&Math.abs(e.a-t.a)<=n}(s.color,c.color)||i.x<0||i.y>=C.resolution||i.y<0||i.y>=C.resolution||null!==(e=l.includes(i)?null:a.updatePixel(i.x,i.y,t,n,r))&&(C.image.buffer.push(e),l.push(i),o({x:i.x-1,y:i.y}),o({x:i.x+1,y:i.y}),o({x:i.x,y:i.y-1}),o({x:i.x,y:i.y+1}))}(s);break;case"color-picker":var u=a.getPixel(C.brush.cursor.position.x,C.brush.cursor.position.y).color;C.brush.setColor(u),C.brush.preview.update(),C.brush.updateCursor(!0)}else if(b.button.state&&0===b.button.id)switch(C.brush.style){case"fill":case"color-picker":break;default:for(var d=C.brush.cursor.position.x<0?0:C.brush.cursor.position.x;d<C.brush.cursor.position.x+C.brush.size&&d<C.resolution;d++)for(var h=C.brush.cursor.position.y<0?0:C.brush.cursor.position.y;h<C.brush.cursor.position.y+C.brush.size&&h<C.resolution;h++){switch(C.brush.style){case"paint":(t=C.brush.getColor()).a=C.brush.fill.a/255*Math.floor(255*(1-(o={x:C.brush.cursor.position.x+Math.floor(C.brush.size/2),y:C.brush.cursor.position.y+Math.floor(C.brush.size/2)},i={x:d,y:h},(Math.abs(i.x-o.x)+Math.abs(i.y-o.y))/Math.round(C.brush.size/2)))),t.a<0&&(t.a=0),n=C.brush.cursor.position.old.x!==C.brush.cursor.position.x||C.brush.cursor.position.old.y!==C.brush.cursor.position.y,r=null;break;case"eraser":t=null,n=C.brush.cursor.position.old.x!==C.brush.cursor.position.x||C.brush.cursor.position.old.y!==C.brush.cursor.position.y,r=0;break;default:t=C.brush.getColor(),n=!1,r=null}null!==(e=a.updatePixel(d,h,t,n,r))&&C.image.buffer.push(e)}}b.inBounds||(b.button.state=!1),b.clicked=!1}else C.debug.element=document.getElementById("debug")},image:{pixels:[],buffer:[],setPixel:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return C.image.pixels[t*C.resolution+e]={graphic:new w,color:null===n?{r:0,g:0,b:0,a:0}:n,changed:!1,x:e,y:t},C.image.pixels[t*C.resolution+e].graphic.beginFill(16777215),C.image.pixels[t*C.resolution+e].graphic.drawRect(0,0,C.scale,C.scale),C.image.pixels[t*C.resolution+e].graphic.endFill(),C.image.pixels[t*C.resolution+e].graphic.tint=v(C.image.pixels[t*C.resolution+e].color),C.image.pixels[t*C.resolution+e].graphic.alpha=C.image.pixels[t*C.resolution+e].color.a/255,C.image.pixels[t*C.resolution+e].graphic.x=e*C.scale,C.image.pixels[t*C.resolution+e].graphic.y=t*C.scale,C.image.pixels[t*C.resolution+e]},getPixel:function(e,t){return C.image.pixels[t*C.resolution+e]||null},updatePixel:function(e,t){C.image.pixels[t*C.resolution+e]||C.image.setPixel(e,t);var n=null;C.layers.cache.forEach((function(r){if(r.visable){var o=r.getPixel(e,t).color;0!==o.a&&(n=null===n?o:x(o,n))}})),C.image.pixels[t*C.resolution+e].color=n||{r:0,g:0,b:0,a:0},C.image.pixels[t*C.resolution+e].graphic.tint=v(C.image.pixels[t*C.resolution+e].color),C.image.pixels[t*C.resolution+e].graphic.alpha=C.image.pixels[t*C.resolution+e].color.a/255},compose:function(){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=C.resolution,e.height=C.resolution;for(var n,r=t.createImageData(C.resolution,C.resolution),o=0;o<C.resolution;o++)for(var i=0;i<C.resolution;i++){var a=4*(i*C.resolution+o);n=C.image.getPixel(o,i).color,r.data[a]=n.r,r.data[a+1]=n.g,r.data[a+2]=n.b,r.data[a+3]=n.a}t.putImageData(r,0,0);var s=e.toDataURL("image/png"),c=document.createElement("a");c.href=s;var l=document.getElementById("image_name").value;c.setAttribute("download","".concat(l||"texture",".png")),c.click()},clear:function(){C.layers.cache.forEach((function(e){return e.clear()})),C.refresh=!0}},zoom:function(e){if(!(e&&C.zoomSettings.scale<=-9||!e&&C.zoomSettings.scale>=20)){for(var t in C.zoomSettings.scale+=e?-1:1,C.zoomSettings.value=C.zoomSettings.scale<0?(10+C.zoomSettings.scale)/10:1+C.zoomSettings.scale/10,C.zoomSettings.width=(C.app.view.width<C.app.view.height?C.app.view.width:C.app.view.height)*C.zoomSettings.value,C.zoomSettings.height=C.zoomSettings.width,C.zoomSettings.offset.x=(C.app.view.width-C.zoomSettings.width)/2,C.zoomSettings.offset.y=(C.app.view.height-C.zoomSettings.height)/2,C.display)C.display[t].width=C.zoomSettings.width,C.display[t].height=C.zoomSettings.height,C.display[t].x=C.zoomSettings.offset.x,C.display[t].y=C.zoomSettings.offset.y;C.scale=(C.display.imageGroup.width<C.display.imageGroup.height?C.display.imageGroup.width:C.display.imageGroup.height)/C.resolution,C.scale*=C.zoomSettings.value,C.brush.updateCursor(!1,!0)}},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;if(null!==C.app)for(;C.app.stage.children[0];)C.app.stage.removeChild(C.app.stage.children[0]);C.app=e,C.resolution=t,C.width=e.view.width,C.height=e.view.height,C.scale=(C.width<C.height?C.width:C.height)/C.resolution,C.image.pixels=[],C.layers.clear(),C.layers.add(),C.brush.cursor.graphic=new w,C.brush.cursor.graphic.beginFill(16777215),C.brush.cursor.graphic.drawRect(0,0,C.scale,C.scale),C.brush.cursor.graphic.endFill();for(var n,r=C.layers.get(C.layers.active),o=0;o<C.resolution;o++){for(var i=0;i<C.resolution;i++){(n=new w).beginFill(16777215),n.drawRect(0,0,C.scale,C.scale),n.endFill(),n.tint=o%2===0&&i%2===1||o%2===1&&i%2===0?16777215:14540253,n.x=o*C.scale,n.y=i*C.scale,C.display.backgroundGroup.addChild(n),C.display.imageGroup.addChild(C.image.setPixel(o,i).graphic),r.setPixel(o,i,C.image.pixels[i*C.resolution+o].color);var a=new h.c;a.lineStyle(1,0,1),a.moveTo(0,i*C.scale),a.lineTo(C.resolution*C.scale,i*C.scale),C.display.gridGroup.addChild(a)}var s=new h.c;s.lineStyle(1,0,1),s.moveTo(o*C.scale,0),s.lineTo(o*C.scale,C.resolution*C.scale),C.display.gridGroup.addChild(s)}for(var c in C.offset.x=C.width/2-C.resolution*C.scale/2,C.offset.y=C.height/2-C.resolution*C.scale/2,C.display)C.display[c].x=C.offset.x,C.display[c].y=C.offset.y;return C.brush.updateCursor(!0,!0),C.app.stage.addChild(C.display.backgroundGroup,C.display.imageGroup),C.app.stage.addChild(C.brush.cursor.graphic),C.zoom(!0),C}},_=C,k=n(0);var E=function(e){return Object(k.jsx)("div",{id:e.id,className:"menu".concat(e.hidden?" hidden":""),children:e.content.map((function(e,t){return Object(k.jsx)("div",{className:"menu-item",children:e},t)}))})},N=(n(33),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={editor:null,content:[{key:"File",id:"file_menu",value:Object(k.jsx)(E,{content:[Object(k.jsx)("div",{className:"menu-button",onClick:function(){return r.state.editor.image.compose()},children:"Download"}),Object(k.jsx)("div",{className:"menu-break"}),Object(k.jsxs)("div",{className:"menu-button",children:[Object(k.jsx)("label",{id:"debug_check_label",htmlFor:"debug-check",children:"Debug"}),Object(k.jsx)("input",{name:"debug-check",type:"checkbox",onChange:function(e){var t=r.state;t.editor.debug.enabled=e.target.checked,r.setState(t)}})]})],id:"file_menu",hidden:!0})},{key:"Edit",id:"edit_menu",value:Object(k.jsx)(E,{content:[Object(k.jsx)("div",{className:"menu-button",onClick:function(){return r.state.editor.image.clear()},children:"Clear"})],id:"edit_menu",hidden:!0})},{key:"View",id:"view_menu",value:Object(k.jsx)(E,{content:[Object(k.jsx)("div",{className:"menu-button",onClick:function(){r.state.editor.grid.toggle()},children:"Toggle Grid"})],id:"view_menu",hidden:!0})}]},r.componentDidMount=function(){var e=[];r.state.content.forEach((function(t){return e.push(document.getElementById(t.id))})),document.addEventListener("click",(function(t){e.forEach((function(e){e.parentElement.contains(t.target)||e.classList.add("hidden")}))}))},r.render=function(){return Object(k.jsx)("div",{className:"texture-editor-ribbon",children:r.state.content.map((function(e){return Object(k.jsxs)("div",{className:"ribbon-menu",children:[Object(k.jsx)("div",{className:"ribbon-menu-button",onClick:function(){document.getElementById(e.id).classList.toggle("hidden")},children:e.key}),e.value]},e.key)}))})},r.state.editor=e.editor,r.setResolution=r.setResolution.bind(Object(l.a)(r)),r}return Object(c.a)(n,[{key:"setResolution",value:function(e){e.preventDefault();var t=Number(document.getElementById("resolution_input").value);if(!isNaN(t)){var n=this.state;t%16===0&&t>0&&t<=128&&(n.editor=n.editor.create(this.editor.app,t)),this.setState(n)}}}]),n}(o.a.Component));n(34),n(35);function S(e){return e.content()}var B=function(e){var t=e.id,n=e.content,r=null,o=document.getElementById(t);return Object(k.jsx)("div",{className:"floater-container",id:t,onMouseDown:function(e){var t=o.getBoundingClientRect(),n=e.clientX-t.x,i=e.clientY-t.y;i>16||(r={x:n,y:i})},onMouseUp:function(){r=null},onMouseMove:function(e){return function(e,t,n){if(null!==t){var r=e.clientX-t.x,o=e.clientY-t.y,i=n.getBoundingClientRect(),a=n.parentElement.getBoundingClientRect();r>a.left&&r+i.width<a.right&&(n.style.left="".concat(r,"px")),o>a.top&&o+i.height<a.bottom&&(n.style.top="".concat(o,"px"))}}(e,r,o)},children:Object(k.jsx)(S,{content:n})})},z=n.p+"static/media/pencil.e99a4c16.svg",P=[{key:"pencil",icon:z},{key:"paint",icon:n.p+"static/media/paintbrush.f6d07354.svg"},{key:"eraser",icon:n.p+"static/media/eraser.4da23591.svg"},{key:"fill",icon:z},{key:"color-picker",icon:z}],L=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={editor:null,brush:null},r.content=function(){return Object(k.jsx)("div",{className:"brushes-container",children:P.map((function(e){return Object(k.jsx)("img",{src:e.icon,className:"brush-icon".concat(r.state.brush.getStyle()===e.key?" brush-selected":""),id:"".concat(e.key,"_brush"),alt:e.key,onClick:function(){var t=r.state.brush.getStyle();document.getElementById("".concat(t,"_brush")).classList.remove("brush-selected"),r.state.brush.setStyle(e.key),document.getElementById("".concat(e.key,"_brush")).classList.add("brush-selected")}},e.key)}))})},r.render=function(){return Object(k.jsx)(B,{id:"brushes_container",content:r.content})},r.state.editor=e.editor,r.state.brush=e.editor.brush,r}return n}(o.a.Component);n(36),n(37);var I=function(e){if(null===e)return console.error("Collapsable div was null.");e.style.maxHeight=e.style.maxHeight?null:e.scrollHeight+"px"};function M(e){return e.content()}var D=function(e){var t=e.id,n=e.content,r=document.getElementById(t);return Object(k.jsxs)("div",{className:"collapsable-container-wrapper",onLoad:function(){var e=document.getElementById(t);e.style.maxHeight=e.scrollHeight+"px"},children:[Object(k.jsx)("div",{className:"collapsable-container-group container-group",id:t,children:Object(k.jsx)(M,{content:n})}),Object(k.jsx)("div",{className:"collapsable-container-group-trigger",onClick:function(){I(r)}})]})},G=(n(38),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={brush:null},r.previewElem=null,r.container=null,r.updatePreview=function(){var e=r.state.brush.getColor();r.previewElem.style.backgroundColor="rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(e.a/255,")")},r.updateRgb=function(){var e=r.state.brush.getColor();["r","g","b","a"].forEach((function(t){document.getElementById("rgb_".concat(t)).value=e[t],document.getElementById("rgb_".concat(t,"_slider")).value=e[t]}))},r.updateHex=function(){var e=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return"".concat(g(e)).concat(g(t)).concat(g(n)).concat(null!==r?g(r):"")}(document.getElementById("rgb_r").value,document.getElementById("rgb_g").value,document.getElementById("rgb_b").value,document.getElementById("rgb_a").value);document.getElementById("hex").value=e},r.fetchDisplayColor=function(){return{r:document.getElementById("rgb_r").value,g:document.getElementById("rgb_g").value,b:document.getElementById("rgb_b").value,a:document.getElementById("rgb_a").value}},r.refresh=function(){r.previewElem=document.getElementById("color_picker_preview"),r.container=document.getElementById("color_picker_controls_container")},r.update=function(){r.updateRgb(),r.updatePreview(),r.updateHex()},r.rgbControls=function(){return Object(k.jsxs)("div",{className:"rgb-container-wrapper",children:[["r","g","b","a"].map((function(e){return Object(k.jsxs)("div",{className:"rgb-input-container",children:[Object(k.jsx)("div",{htmlFor:"rgb_".concat(e),className:"rgb-input-label",children:e.toUpperCase()}),Object(k.jsx)("input",{name:"rgb_".concat(e,"_slider"),id:"rgb_".concat(e,"_slider"),type:"range",min:"0",max:"255",className:"rgb-input-slider",onChange:function(t){document.getElementById("rgb_".concat(e)).value=t.target.value,r.updateColor(r.fetchDisplayColor()),r.updatePreview(),r.updateHex()},defaultValue:"a"===e?255:0},"".concat(e,"_slider")),Object(k.jsx)("input",{name:"rgb_".concat(e),id:"rgb_".concat(e),type:"text",className:"rgb-input-field",placeholder:"0",onChange:function(e){r.updateColor(r.fetchDisplayColor()),r.updatePreview(),r.updateHex()},onKeyPress:function(e){e.key.match(/[0-9]/)||e.preventDefault()},defaultValue:"a"===e?255:""},e)]},"rgb_".concat(e,"_div"))})),Object(k.jsx)("input",{name:"hex",id:"hex",type:"text",className:"hex-input-field",placeholder:"000000ff",onChange:function(e){var t=function(e){switch(e.length){case 0:return{r:0,g:0,b:0,a:255};case 1:return{r:m(e),g:m(e),b:m(e),a:255};case 3:var t=e.split("");return{r:m("".concat(t[0]+t[0])),g:m("".concat(t[1]+t[1])),b:m("".concat(t[2]+t[2])),a:255};case 4:var n=e.split("");return{r:m("".concat(n[0]+n[0])),g:m("".concat(n[1]+n[1])),b:m("".concat(n[2]+n[2])),a:m("".concat(n[3]+n[3]))};case 6:var r=e.split("");return{r:m("".concat(r[0]+r[1])),g:m("".concat(r[2]+r[3])),b:m("".concat(r[4]+r[5]))};case 8:var o=e.split("");return{r:m("".concat(o[0]+o[1])),g:m("".concat(o[2]+o[3])),b:m("".concat(o[4]+o[5])),a:m("".concat(o[6]+o[7]))};default:return{r:0,g:0,b:0,a:255}}}(e.target.value);for(var n in t)document.getElementById("rgb_".concat(n)).value=t[n];r.updateColor(r.fetchDisplayColor()),r.updatePreview()},onKeyPress:function(e){(!e.key.match(/[0-9A-Fa-f]/)||e.target.value.length>=8)&&e.preventDefault()},defaultValue:"000000ff"})]})},r.render=function(){return Object(k.jsxs)("div",{className:"floater-group",children:[Object(k.jsxs)("div",{className:"container-group",id:"color_picker_preview_container",children:[Object(k.jsx)("div",{className:"color-picker-preview",id:"color_picker_preview"}),Object(k.jsx)("div",{className:"brush-size-preview",id:"brush_size_preview"}),Object(k.jsx)("input",{className:"brush-size-input",id:"brush_size_input",type:"text",defaultValue:1,onChange:function(e){r.state.brush.setSize(Number(e.target.value))},onKeyPress:function(e){null===e.key.match(/[0-9]/)&&e.preventDefault()}})]}),Object(k.jsx)(D,{id:"color_picker_container",content:r.rgbControls})]})},r.state.brush=e.brush,r.state.brush.preview=Object(l.a)(r),r.updateColor=e.updateColor.bind(Object(l.a)(r)),r.fetchDisplayColor=r.fetchDisplayColor.bind(Object(l.a)(r)),r}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.refresh(),this.updatePreview()}}]),n}(o.a.Component)),R=n.p+"static/media/eye-open.157d1f69.svg",F=n.p+"static/media/minus.e3517047.svg",A=(n(39),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={layers:null},r.container=null,r.updateActiveLayer=function(e){var t=r.state;document.getElementById("layer_".concat(t.layers.active)).classList.remove("layer-item-selected"),document.getElementById("layer_".concat(e)).classList.add("layer-item-selected"),t.layers.active=e,r.setState(t)},r.updateLayerViewable=function(e){var t=r.state;t.layers.get(e).toggle(),document.getElementById("layer_".concat(e,"_viewable")).classList.toggle("layer-item-viewable"),r.setState(t)},r.layerMovementButtons=function(e,t){return Object(k.jsxs)("div",{className:"layer-item-movement-group",children:[Object(k.jsx)("div",{id:"layer_item_move_up",className:"layer-item-movement-button".concat(0===e?" hidden":""),onClick:function(){var t=r.state;t.layers.move(e,e-1),r.setState(t),r.updateActiveLayer(e-1)},children:"/\\"}),Object(k.jsx)("div",{id:"layer_item_move_down",className:"layer-item-movement-button".concat(e===t?" hidden":""),onClick:function(){var t=r.state;t.layers.move(e,e+1),r.setState(t),r.updateActiveLayer(e+1)},children:"\\/"})]})},r.layerControls=function(){return Object(k.jsxs)("div",{className:"layers-container",children:[r.state.layers.cache.map((function(e,t){return Object(k.jsxs)("div",{className:"layer-item".concat(t===r.state.layers.active?" layer-item-selected":""),id:"layer_".concat(t),onClick:function(e){r.updateActiveLayer(t)},children:[r.layerMovementButtons(t,r.state.layers.cache.length-1),Object(k.jsx)("input",{type:"text",className:"layer-item-title",placeholder:"Layer ".concat(t+1),value:e.name,onChange:function(e){var n=r.state;n.layers.get(t).name=e.target.value,r.setState(n)}}),Object(k.jsx)("img",{src:R,alt:"Hide",className:"layer-item-button",id:"layer_".concat(t,"_viewable"),onClick:function(){r.updateLayerViewable(t)}}),Object(k.jsx)("img",{src:F,alt:"Remove",className:"layer-item-button",onClick:function(){var e=r.state;e.layers=e.layers.remove(t),r.setState(r.state)}})]},t)})),Object(k.jsx)("div",{className:"layer-add-item",onClick:function(){r.state.layers.add(),r.setState(r.state)},children:"Add Layer"})]})},r.render=function(){return Object(k.jsx)("div",{className:"floater-group",children:Object(k.jsx)(D,{id:"layer_container",content:r.layerControls})})},r.state.layers=e.layers,r.updateActiveLayer=r.updateActiveLayer.bind(Object(l.a)(r)),r.updateLayerViewable=r.updateLayerViewable.bind(Object(l.a)(r)),r.layerMovementButtons=r.layerMovementButtons.bind(Object(l.a)(r)),r}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.container=document.getElementById("layers_controls_container")}}]),n}(o.a.Component)),H=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={editor:null,brush:null,layers:null,container:null,origin:null,moving:null},r.content=function(){var e=[{key:"Colors",value:Object(k.jsx)(G,{updateColor:r.updateColor,brush:r.state.brush})},{key:"Layers",value:Object(k.jsx)(A,{layers:r.state.layers})},{key:"Debug",value:Object(k.jsx)("div",{className:"debug",id:"debug"})}];return Object(k.jsx)("ul",{className:"floater-group-list",children:e.map((function(e,t){return Object(k.jsxs)("li",{className:"floater-group",children:[Object(k.jsx)("div",{className:"floater-group-title",children:e.key}),e.value]},e.key)}))})},r.componentDidMount=function(){var e=r.state;e.container=document.getElementById("side_bar_container"),e.origin=e.container.parentElement.getBoundingClientRect(),e.container.style.left="".concat(e.origin.width-e.container.getBoundingClientRect().width,"px"),r.setState(e)},r.render=function(){return Object(k.jsx)(B,{id:"side_bar_container",content:r.content})},r.state.editor=e.editor,r.state.brush=e.editor.brush,r.state.layers=e.editor.layers,r.updateColor=e.updateColor,r}return n}(o.a.Component),T=(n(40),null),V=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).state={app:null,canvas:null,doBoundUpdate:!0,editor:_},e.getCanvas=function(){var t=document.getElementById("texture_editor_wrapper"),n=t.getBoundingClientRect(),r=e.state;r.app=new h.a({width:n.width,height:n.height,backgroundAlpha:1}),r.editor=_.create(r.app,16),r.app.view.oncontextmenu=function(e){e.preventDefault(),e.stopPropagation()},r.app.view.id="editor",r.canvas=r.editor.startup(),t.appendChild(r.canvas),e.setState(r)},e.componentDidMount=function(){e.getCanvas(),e.state.editor.bounds.update(),document.addEventListener("mousemove",(function(t){b.position.document.x=t.clientX,b.position.document.y=t.clientY,b.position.old={x:Math.floor(b.position.x),y:Math.floor(b.position.y)},b.position.x=Math.floor(t.clientX-e.state.editor.bounds.value.left),b.position.y=Math.floor(t.clientY-e.state.editor.bounds.value.top),b.moving=!0,T&&clearTimeout(T),T=setTimeout((function(){b.position.old={x:Math.floor(b.position.x),y:Math.floor(b.position.y)},b.moving=!1}),30)})),e.state.canvas.addEventListener("mousedown",(function(e){b.button.state=!0,b.button.id=e.button})),e.state.canvas.addEventListener("mouseup",(function(){b.button.state=!1,b.button.id=null})),e.state.canvas.addEventListener("mouseleave",(function(){return b.inBounds=!1})),e.state.canvas.addEventListener("mouseenter",(function(){return b.inBounds=!0})),e.state.canvas.addEventListener("click",(function(){return b.clicked=!0})),window.addEventListener("resize",(function(){return e.state.editor.bounds.update()}))},e.render=function(){return Object(k.jsxs)("div",{className:"editor-container",children:[Object(k.jsx)(N,{editor:e.state.editor}),Object(k.jsxs)("div",{className:"texture-editor-container",id:"texture_editor_container",children:[Object(k.jsx)(L,{editor:e.state.editor}),Object(k.jsx)(H,{editor:e.state.editor,updateColor:e.updateColor}),Object(k.jsx)("div",{className:"texture-editor-wrapper",id:"texture_editor_wrapper",onWheel:function(t){return e.state.editor.zoom(t.deltaY>0)}})]}),Object(k.jsxs)("div",{className:"texture-editor-controls",children:[Object(k.jsx)("label",{htmlFor:"texture-name-input",children:"File name:"}),Object(k.jsx)("input",{type:"text",name:"texture-name-input",id:"image_name",defaultValue:"texture",onKeyPress:function(e){e.key.match(/[\w\d.()]/)||e.preventDefault()}})]})]})},e.updateColor=e.updateColor.bind(Object(l.a)(e)),e.fetchBrush=e.fetchBrush.bind(Object(l.a)(e)),e}return Object(c.a)(n,[{key:"fetchBrush",value:function(){return this.state.editor.brush}},{key:"updateColor",value:function(e){var t=this.state,n=t.editor.brush.getColor();for(var r in e)n[r]=""===e[r]?0:Number(e[r]);t.editor.brush.setColor(n),this.setState(t)}}]),n}(o.a.Component);var J=function(){return Object(k.jsx)("div",{className:"App",children:Object(k.jsx)(V,{})})},U=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,43)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),o(e),i(e),a(e)}))},Y=(n(41),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).render=function(){return Object(k.jsx)("div",{className:"nav-bar"})},e}return n}(o.a.Component));a.a.render(Object(k.jsxs)(o.a.StrictMode,{children:[Object(k.jsx)("header",{children:Object(k.jsx)(Y,{})}),Object(k.jsx)("main",{children:Object(k.jsx)(J,{})}),Object(k.jsxs)("footer",{children:[Object(k.jsx)("div",{children:"Built by ChrisOfNormandy."}),Object(k.jsxs)("div",{children:["Join ",Object(k.jsx)("a",{href:"https://discord.gg/EW5JsGJfdt",children:"Discord"})]})]})]}),document.getElementById("root")),U()}},[[42,1,2]]]);
//# sourceMappingURL=main.ff6a5615.chunk.js.map