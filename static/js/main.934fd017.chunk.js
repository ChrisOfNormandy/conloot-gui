(this["webpackJsonpconloot-gui"]=this["webpackJsonpconloot-gui"]||[]).push([[0],{1:function(t,e){var n={position:{x:0,y:0,old:{x:0,y:0}},button:{state:!1,id:0,origin:{x:null,y:null}},displacement:function(){return{x:null===n.position.old.x?0:n.position.x-n.position.old.x,y:null===n.position.old.y?0:n.position.y-n.position.old.y}},getPosition:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===t?{x:n.position.x,y:n.position.y}:{x:n.position.x-t.x,y:n.position.y-t.y}},inBounds:!1,moving:!1,clicked:!1};t.exports=n},24:function(t,e,n){},25:function(t,e,n){},26:function(t,e,n){},37:function(t,e,n){},38:function(t,e,n){"use strict";n.r(e);var i=n(3),o=n.n(i),a=n(16),r=n.n(a),c=(n(24),n(25),n(5)),s=n(10),d=n(9),l=(n(26),n(0)),u=function(t){Object(s.a)(n,t);var e=Object(d.a)(n);function n(){var t;Object(c.a)(this,n);for(var i=arguments.length,o=new Array(i),a=0;a<i;a++)o[a]=arguments[a];return(t=e.call.apply(e,[this].concat(o))).render=function(){return Object(l.jsx)("div",{className:"nav-bar"})},t}return n}(o.a.Component),h=n(8),p=n(7),g=n(4),b=n(1),x=n.n(b),f=function(){function t(e){var n=this;Object(c.a)(this,t),this.currentColor={r:0,g:0,b:0,a:255},this.debug=!1,this.type="WebGL",this.loader=g.c.shared,this.Sprite=g.d,this.Graphics=g.b,this.doBoundUpdate=!0,this.updateBounds=function(){var t=n.app.view.getBoundingClientRect();n.bounds={x:t.x,y:t.y,left:t.left,right:t.right,top:t.top,bottom:t.bottom,width:t.width,height:t.height},n.doBoundUpdate=!1,n.refresh=!0},this.startup=function(){return n.onReady((function(){return n.app.ticker.add((function(){return n.draw()}))})),n.app.view},this.onReady=function(t){console.log("App ready. Loading."),g.e.isWebGLSupported()||(n.type="canvas"),g.e.sayHello(n.type),n.loader.load(t)},this.pixels=[],this.showGrid=!1,this.refresh=!0,this.debugElem=document.getElementById("debug"),this.updateDebug=function(){if(null===n.debugElem&&(n.debugElem=document.getElementById("debug")),n.debug){var t=x.a.getPosition();n.debugElem.innerHTML="Mouse: ".concat(JSON.stringify(t)," --\x3e ").concat(Math.floor(t.x/16),", ").concat(Math.floor(t.y/16),"<br />")+"Color: ".concat(JSON.stringify(n.currentColor),"<br />")+"0x".concat(n.decToHex(n.currentColor.r)).concat(n.decToHex(n.currentColor.g)).concat(n.decToHex(n.currentColor.b))}else n.debugElem.innerHTML=""},this.background=[],this.draw=function(){var t;n.updateDebug();for(var e=0;e<16;e++)for(var i=0;i<16;i++)((t=n.getPixel(e,i)).update||n.refresh)&&(n.app.stage.removeChild(t.graphic),n.refresh&&n.setPixel(e,i,t.color),t.color.a<255?n.app.stage.addChild(n.background[16*i+e]):n.app.stage.removeChild(n.background[16*i+e]),t.color.a>0&&n.app.stage.addChild(t.graphic),t.update=!1);if(x.a.button.state){var o=x.a.getPosition(),a=Math.floor(o.x/n.scale),r=Math.floor(o.y/n.scale);a>=0&&a<16&&r>=0&&r<16&&(0===x.a.button.id?n.setPixel(a,r,n.currentColor):2===x.a.button.id&&n.setPixel(a,r,{r:0,g:0,b:0,a:0}),n.getPixel(a,r).update=!0),x.a.inBounds||(x.a.button.state=!1)}n.refresh=!1},this.compose=function(){var t=document.createElement("canvas"),e=t.getContext("2d");t.width=16,t.height=16;for(var i=e.createImageData(16,16),o=0;o<16;o++)for(var a=0;a<16;a++){var r=4*(16*a+o);i.data[r]=n.pixels[o][a].color.r,i.data[r+1]=n.pixels[o][a].color.g,i.data[r+2]=n.pixels[o][a].color.b,i.data[r+3]=n.pixels[o][a].color.a}e.putImageData(i,0,0);var c=t.toDataURL("image/png"),s=document.createElement("a");s.href=c,s.setAttribute("download","texture.png"),s.click()},this.app=e,this.width=e.view.width,this.height=e.view.height,this.scale=this.width/16,this.pixels=[];for(var i=0;i<16;i++){this.pixels[i]=[];for(var o=0;o<16;o++)this.background[16*o+i]=new this.Graphics,this.background[16*o+i].beginFill(i%2===0&&o%2===1||i%2===1&&o%2===0?16777215:14540253),this.background[16*o+i].drawRect(0,0,this.scale,this.scale),this.background[16*o+i].endFill(),this.background[16*o+i].x=i*this.scale,this.background[16*o+i].y=o*this.scale,this.setPixel(i,o,{r:255*i/15,g:0,b:255*o/15,a:Math.floor((255*i/15+255*o/15)/2)})}}return Object(h.a)(t,[{key:"decToHex",value:function(t){var e=Number(t).toString(16);return 1===e.length?"0".concat(e):e}},{key:"clear",value:function(){console.log("Clearing...");for(var t=0;t<16;t++)for(var e=0;e<16;e++)this.setPixel(t,e,{r:0,g:0,b:0,a:0}),this.getPixel(t,e).update=!0}},{key:"rgbToHex",value:function(t,e,n){return Number("0x".concat(this.decToHex(t)).concat(this.decToHex(e)).concat(this.decToHex(n)))}},{key:"getPixel",value:function(t,e){return this.pixels[t]&&this.pixels[t][e]?this.pixels[t][e]:null}},{key:"setPixel",value:function(t,e,n){this.pixels[t]&&this.pixels[t][e]||(this.pixels[t][e]={color:n,graphic:new this.Graphics,update:!1});var i=this.getPixel(t,e);i.graphic=new this.Graphics,this.showGrid&&i.graphic.lineStyle(1,0,1),i.graphic.beginFill(this.rgbToHex(n.r,n.g,n.b)),i.graphic.drawRect(0,0,this.scale,this.scale),i.graphic.endFill(),i.graphic.alpha=n.a/255,i.graphic.x=t*this.scale,i.graphic.y=e*this.scale}}]),t}(),v=(n(37),null),m=function(t){Object(s.a)(n,t);var e=Object(d.a)(n);function n(){var t;return Object(c.a)(this,n),(t=e.call(this)).doBoundUpdate=!0,t.getCanvas=function(){var e=document.getElementById("texture_editor_wrapper"),n=.5*e.getBoundingClientRect().width;t.app=new g.a({width:n,height:n}),t.editor=new f(t.app),t.app.view.oncontextmenu=function(t){t.preventDefault(),t.stopPropagation()},t.app.view.id="editor",t.canvas=t.editor.startup(),e.appendChild(t.canvas)},t.componentDidMount=function(){t.getCanvas(),t.editor.updateBounds(),t.canvas.addEventListener("mousemove",(function(e){x.a.position.old={x:Math.floor(x.a.position.x),y:Math.floor(x.a.position.y)},x.a.position.x=Math.floor(e.clientX-t.editor.bounds.left),x.a.position.y=Math.floor(e.clientY-t.editor.bounds.top),x.a.moving=!0,v&&clearTimeout(v),v=setTimeout((function(){x.a.position.old={x:Math.floor(x.a.position.x),y:Math.floor(x.a.position.y)},x.a.moving=!1}),30)})),t.canvas.addEventListener("mousedown",(function(t){x.a.button.state=!0,x.a.button.id=t.button})),t.canvas.addEventListener("mouseup",(function(){x.a.button.state=!1,x.a.button.id=null})),t.canvas.addEventListener("mouseleave",(function(){return x.a.inBounds=!1})),t.canvas.addEventListener("mouseenter",(function(){return x.a.inBounds=!0})),t.canvas.addEventListener("click",(function(){return x.a.clicked=!0})),window.addEventListener("resize",(function(){t.editor.updateBounds()}))},t.render=function(){return Object(l.jsxs)("div",{children:[Object(l.jsxs)("div",{className:"texture-editor-container",id:"texture_editor_container",children:[Object(l.jsx)("div",{className:"texture-editor-wrapper",id:"texture_editor_wrapper"}),Object(l.jsx)("div",{className:"color-picker-container",children:["r","g","b","a"].map((function(e){return Object(l.jsxs)("div",{className:"rgb-input-container",children:[Object(l.jsx)("label",{htmlFor:"rgb_".concat(e),className:"rgb-input-label",children:e}),Object(l.jsx)("input",{name:"rgb_".concat(e),type:"text",className:"rgb-input-field",placeholder:"0",onChange:t.updateColor,onKeyPress:function(t){t.key.match(/[0-9]/)||t.preventDefault()},defaultValue:"a"===e?255:0},e)]},"rgb_".concat(e,"_div"))}))}),Object(l.jsxs)("div",{className:"texture-editor-controls",children:[Object(l.jsx)("button",{onClick:function(){t.editor.showGrid=!t.editor.showGrid,t.editor.refresh=!0},children:"Toggle Grid"}),Object(l.jsx)("button",{onClick:function(){return t.editor.clear()},children:"Clear"})]}),Object(l.jsx)("button",{onClick:function(){return t.editor.compose()},children:"Download"})]}),Object(l.jsx)("label",{id:"debug_check_label",htmlFor:"debug-check",children:"Debug"}),Object(l.jsx)("input",{name:"debug-check",type:"checkbox",onChange:function(e){t.editor.debug=e.target.checked}})]})},t.updateColor=t.updateColor.bind(Object(p.a)(t)),t}return Object(h.a)(n,[{key:"updateColor",value:function(t){t.target.value>255&&(t.target.value=255);var e=t.target.name.match(/rgb_([rgba])/)[1];this.editor.currentColor[e]=""===t.target.value?0:t.target.value}}]),n}(o.a.Component);var j=function(){return Object(l.jsxs)("div",{className:"App",children:[Object(l.jsx)("header",{children:Object(l.jsx)(u,{})}),Object(l.jsxs)("main",{children:[Object(l.jsx)(m,{}),Object(l.jsx)("div",{id:"debug"})]}),Object(l.jsxs)("footer",{children:[Object(l.jsx)("div",{children:"Built by ChrisOfNormandy."}),Object(l.jsxs)("div",{children:["Join ",Object(l.jsx)("a",{href:"https://discord.gg/EW5JsGJfdt",children:"Discord"})]})]})]})},y=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,39)).then((function(e){var n=e.getCLS,i=e.getFID,o=e.getFCP,a=e.getLCP,r=e.getTTFB;n(t),i(t),o(t),a(t),r(t)}))};r.a.render(Object(l.jsx)(o.a.StrictMode,{children:Object(l.jsx)(j,{})}),document.getElementById("root")),y()}},[[38,1,2]]]);
//# sourceMappingURL=main.934fd017.chunk.js.map