(this["webpackJsonpconloot-gui"]=this["webpackJsonpconloot-gui"]||[]).push([[0],{1:function(e,t){var n={position:{x:0,y:0,old:{x:0,y:0}},button:{state:!1,id:0,origin:{x:null,y:null}},displacement:function(){return{x:null===n.position.old.x?0:n.position.x-n.position.old.x,y:null===n.position.old.y?0:n.position.y-n.position.old.y}},getPosition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?{x:n.position.x,y:n.position.y}:{x:n.position.x-e.x,y:n.position.y-e.y}},inBounds:!1,moving:!1,clicked:!1};e.exports=n},24:function(e,t,n){},25:function(e,t,n){},35:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){"use strict";n.r(t);var o=n(2),r=n.n(o),i=n(16),a=n.n(i),c=(n(24),n(25),n(4)),l=n(10),u=n(7),s=n(6),d=n(5),p=n(8),h=n(1),b=n.n(h),g=p.c.shared,f=p.b;function v(e){var t=Number(e).toString(16);return 1===t.length?"0".concat(t):t}function x(e,t,n){return Number("0x".concat(v(e)).concat(v(t)).concat(v(n)))}var j={app:null,brush:{style:"pencil",fill:{r:0,g:0,b:0,a:255}},resolution:0,background:[],width:0,height:0,scale:0,debug:!1,debugElem:document.getElementById("debug"),pixels:[],showGrid:!1,refresh:!0,doBoundUpdate:!0,bounds:null,type:"WebGL",getCurrentColor:function(){return{r:j.brush.fill.r,g:j.brush.fill.g,b:j.brush.fill.b,a:j.brush.fill.a}},updateBounds:function(){var e=j.app.view.getBoundingClientRect();j.bounds={x:e.x,y:e.y,left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width,height:e.height},j.doBoundUpdate=!1,j.refresh=!0},startup:function(){return j.onReady((function(){return j.app.ticker.add((function(){return j.draw()}))})),j.app.view},onReady:function(e){console.log("App ready. Loading."),p.d.isWebGLSupported()||(j.type="canvas"),p.d.sayHello(j.type),g.load(e)},updateDebug:function(){if(null===j.debugElem&&(j.debugElem=document.getElementById("debug")),j.debug){var e=b.a.getPosition(),t=Math.floor(e.x/j.scale),n=Math.floor(e.y/j.scale);j.debugElem.innerHTML="Mouse: ".concat(JSON.stringify(e)," --\x3e ").concat(t,", ").concat(n,"<br />")+"Color: ".concat(JSON.stringify(j.brush.fill)," | 0x").concat(v(j.brush.fill.r)).concat(v(j.brush.fill.g)).concat(v(j.brush.fill.b),"<br />")+"Buffer: ".concat(j.buffer.length)}else j.debugElem.innerHTML=""},buffer:[],draw:function(){if(j.updateDebug(),j.refresh)return j.pixels.forEach((function(e){j.app.stage.removeChild(e.graphic),j.setPixel(e.x,e.y,e.color)})),void(j.refresh=!1);if(j.buffer.forEach((function(e,t){e.graphic.tint=x(e.color.r,e.color.g,e.color.b),e.graphic.alpha=e.color.a,j.buffer.splice(t,1)})),b.a.button.state){var e=b.a.getPosition(),t=Math.floor(e.x/j.scale),n=Math.floor(e.y/j.scale);t>=0&&t<j.resolution&&n>=0&&n<j.resolution&&(0===b.a.button.id?j.updatePixel(t,n,j.getCurrentColor()):2===b.a.button.id&&j.updatePixel(t,n,{r:0,g:0,b:0,a:0})),b.a.inBounds||(b.a.button.state=!1)}b.a.clicked=!1},clear:function(){j.pixels.forEach((function(e){e.color={r:0,g:0,b:0,a:0},e.graphic.tint=0,e.graphic.alpha=0}))},getPixel:function(e,t){return j.pixels[t*j.resolution+e]?j.pixels[t*j.resolution+e]:null},updatePixel:function(e,t,n){var o=j.getPixel(e,t);if(null===o)throw console.error(e,t,n),new Error("pause");o.color=n,j.buffer.push(o)},setPixel:function(e,t,n){j.getPixel(e,t)||(j.pixels[t*j.resolution+e]={color:n,graphic:null,x:e,y:t,index:t*j.resolution+e});var o=j.getPixel(e,t);return o.graphic=new f,j.showGrid&&o.graphic.lineStyle(1,0,1),o.graphic.beginFill(16777215),o.graphic.drawRect(0,0,j.scale,j.scale),o.graphic.endFill(),o.graphic.tint=x(n.r,n.g,n.b),o.graphic.alpha=n.a/255,o.graphic.x=e*j.scale,o.graphic.y=t*j.scale,o.color=null===n?{r:0,g:0,b:0,a:0}:n,j.app.stage.addChild(o.graphic),o},compose:function(){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=j.resolution,e.height=j.resolution;for(var n,o=t.createImageData(j.resolution,j.resolution),r=0;r<j.resolution;r++)for(var i=0;i<j.resolution;i++){var a=4*(i*j.resolution+r);n=j.getPixel(r,i).color,o.data[a]=n.r,o.data[a+1]=n.g,o.data[a+2]=n.b,o.data[a+3]=n.a}t.putImageData(o,0,0);var c=e.toDataURL("image/png"),l=document.createElement("a");l.href=c;var u=document.getElementById("image_name").value;l.setAttribute("download","".concat(u||"texture",".png")),l.click()},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;j.app=e,j.getCurrentColor(),j.resolution=t,j.width=e.view.width,j.height=e.view.height,j.scale=j.width/j.resolution,j.pixels=[];for(var n=0;n<j.resolution;n++)for(var o=0;o<j.resolution;o++)j.background[o*j.resolution+n]=new f,j.background[o*j.resolution+n].beginFill(16777215),j.background[o*j.resolution+n].drawRect(0,0,j.scale,j.scale),j.background[o*j.resolution+n].endFill(),j.background[o*j.resolution+n].tint=n%2===0&&o%2===1||n%2===1&&o%2===0?16777215:14540253,j.background[o*j.resolution+n].x=n*j.scale,j.background[o*j.resolution+n].y=o*j.scale,j.app.stage.addChild(j.background[o*j.resolution+n]),j.setPixel(n,o,{r:Math.floor(255*n/(j.resolution-1)),g:Math.floor((n+o)/2*255/(j.resolution-1)),b:Math.floor(255*o/(j.resolution-1)),a:Math.floor(255-Math.abs((255*n/(j.resolution-1)+255*o/(j.resolution-1))/2-128))});return j}},m=j,y=(n(35),n(0)),O=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(c.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).render=function(){return Object(y.jsxs)("div",{className:"brushes-container",children:[Object(y.jsx)("div",{children:"1"}),Object(y.jsx)("div",{children:"2"}),Object(y.jsx)("div",{children:"3"})]})},e}return n}(r.a.Component),w=(n(37),function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(e){var o;return Object(c.a)(this,n),(o=t.call(this,e)).previewElem=null,o.updatePreview=function(){var e=o.fetchBrush().fill;o.previewElem.style.backgroundColor="rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(e.a/255,")")},o.render=function(){return Object(y.jsx)("div",{className:"side-bar-container",children:Object(y.jsxs)("div",{className:"color-picker-container",children:[Object(y.jsx)("div",{className:"container-group",id:"color_picker_preview_container",children:Object(y.jsx)("div",{className:"color-picker-preview",id:"color_picker_preview"})}),Object(y.jsx)("div",{className:"collapsable-container-group container-group",id:"color_picker_controls_container",children:["r","g","b","a"].map((function(e){return Object(y.jsxs)("div",{className:"rgb-input-container",children:[Object(y.jsx)("label",{htmlFor:"rgb_".concat(e),className:"rgb-input-label",children:e}),Object(y.jsx)("input",{name:"rgb_".concat(e),id:"rgb_".concat(e),type:"text",className:"rgb-input-field",placeholder:"0",onChange:function(e){o.updateColor(e),o.updatePreview()},onKeyPress:function(e){e.key.match(/[0-9]/)||e.preventDefault()},defaultValue:"a"===e?255:""},e),Object(y.jsx)("input",{name:"rgb_".concat(e,"_slider"),type:"range",min:"0",max:"255",className:"rgb-input-slider",onChange:function(t){document.getElementById("rgb_".concat(e)).value=t.target.value,o.updateColor(t),o.updatePreview()},defaultValue:"a"===e?255:0},"".concat(e,"_slider"))]},"rgb_".concat(e,"_div"))}))}),Object(y.jsx)("div",{className:"collapsable-container-group-trigger",id:"collapse_color_picker",onClick:function(){var e=document.getElementById("color_picker_controls_container");e.style.maxHeight=e.style.maxHeight?null:e.scrollHeight+"px"}})]})})},o.updateColor=e.updateColor,o.fetchBrush=e.fetchBrush,o.updatePreview=o.updatePreview.bind(Object(u.a)(o)),o}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.previewElem=document.getElementById("color_picker_preview"),this.updatePreview()}}]),n}(r.a.Component)),C=(n(38),null),k=function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(c.a)(this,n),(e=t.call(this)).state={app:null,canvas:null,doBoundUpdate:!0,editor:m},e.getCanvas=function(){var t=document.getElementById("texture_editor_wrapper"),n=t.getBoundingClientRect().height<t.getBoundingClientRect().width?.9*t.getBoundingClientRect().height:.9*t.getBoundingClientRect().width,o=e.state;o.app=new p.a({width:n,height:n}),o.editor=m.create(o.app,16),o.app.view.oncontextmenu=function(e){e.preventDefault(),e.stopPropagation()},o.app.view.id="editor",o.canvas=o.editor.startup(),t.appendChild(o.canvas),e.setState(o)},e.componentDidMount=function(){e.getCanvas(),e.state.editor.updateBounds(),e.state.canvas.addEventListener("mousemove",(function(t){b.a.position.old={x:Math.floor(b.a.position.x),y:Math.floor(b.a.position.y)},b.a.position.x=Math.floor(t.clientX-e.state.editor.bounds.left),b.a.position.y=Math.floor(t.clientY-e.state.editor.bounds.top),b.a.moving=!0,C&&clearTimeout(C),C=setTimeout((function(){b.a.position.old={x:Math.floor(b.a.position.x),y:Math.floor(b.a.position.y)},b.a.moving=!1}),30)})),e.state.canvas.addEventListener("mousedown",(function(e){b.a.button.state=!0,b.a.button.id=e.button})),e.state.canvas.addEventListener("mouseup",(function(){b.a.button.state=!1,b.a.button.id=null})),e.state.canvas.addEventListener("mouseleave",(function(){return b.a.inBounds=!1})),e.state.canvas.addEventListener("mouseenter",(function(){return b.a.inBounds=!0})),e.state.canvas.addEventListener("click",(function(){return b.a.clicked=!0})),window.addEventListener("resize",(function(){e.state.editor.updateBounds()}))},e.render=function(){return Object(y.jsxs)("div",{className:"editor-container",children:[Object(y.jsx)(O,{}),Object(y.jsxs)("div",{className:"texture-editor-container",id:"texture_editor_container",children:[Object(y.jsxs)("div",{className:"texture-editor-ribbon",children:[Object(y.jsx)("button",{onClick:function(){return e.state.editor.compose()},children:"Download"}),Object(y.jsx)("label",{id:"debug_check_label",htmlFor:"debug-check",children:"Debug"}),Object(y.jsx)("input",{name:"debug-check",type:"checkbox",onChange:function(t){var n=e.state;n.editor.debug=t.target.checked,e.setState(n)}}),Object(y.jsxs)("form",{children:[Object(y.jsx)("input",{type:"text",id:"resolution_input",name:"resolution",defaultValue:"16"}),Object(y.jsx)("input",{type:"submit",value:"Create",onClick:e.setResolution})]}),Object(y.jsx)("button",{onClick:function(){var t=e.state;t.editor.showGrid=!t.editor.showGrid,t.editor.refresh=!0,e.setState(t)},children:"Toggle Grid"}),Object(y.jsx)("button",{onClick:function(){return e.state.editor.clear()},children:"Clear"})]}),Object(y.jsx)("div",{className:"texture-editor-wrapper",id:"texture_editor_wrapper"}),Object(y.jsxs)("div",{className:"texture-editor-controls",children:[Object(y.jsx)("label",{htmlFor:"texture-name-input",children:"File name:"}),Object(y.jsx)("input",{type:"text",name:"texture-name-input",id:"image_name",defaultValue:"texture",onKeyPress:function(e){e.key.match(/[\w\d.()]/)||e.preventDefault()}})]})]}),Object(y.jsx)(w,{updateColor:e.updateColor,fetchBrush:e.fetchBrush})]})},e.updateColor=e.updateColor.bind(Object(u.a)(e)),e.setResolution=e.setResolution.bind(Object(u.a)(e)),e.fetchBrush=e.fetchBrush.bind(Object(u.a)(e)),e}return Object(l.a)(n,[{key:"fetchBrush",value:function(){return this.state.editor.brush}},{key:"updateColor",value:function(e){var t=this.state;e.target.value>255&&(e.target.value=255);var n=e.target.name.match(/rgb_([rgba])/)[1];t.editor.brush.fill[n]=""===e.target.value?0:e.target.value,t.editor.getCurrentColor(),this.setState(t)}},{key:"setResolution",value:function(e){var t=this.state;e.preventDefault();var n=Number(document.getElementById("resolution_input").value);isNaN(n)||(n%16===0&&n>0&&n<=128?t.editor=m.create(t.app,n):console.log("No"),this.setState(t))}}]),n}(r.a.Component);var _=function(){return Object(y.jsxs)("div",{className:"App",children:[Object(y.jsx)(k,{}),Object(y.jsx)("div",{id:"debug"})]})},B=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,41)).then((function(t){var n=t.getCLS,o=t.getFID,r=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),o(e),r(e),i(e),a(e)}))},E=(n(39),function(e){Object(s.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(c.a)(this,n);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(e=t.call.apply(t,[this].concat(r))).render=function(){return Object(y.jsx)("div",{className:"nav-bar"})},e}return n}(r.a.Component));a.a.render(Object(y.jsxs)(r.a.StrictMode,{children:[Object(y.jsx)("header",{children:Object(y.jsx)(E,{})}),Object(y.jsx)("main",{children:Object(y.jsx)(_,{})}),Object(y.jsxs)("footer",{children:[Object(y.jsx)("div",{children:"Built by ChrisOfNormandy."}),Object(y.jsxs)("div",{children:["Join ",Object(y.jsx)("a",{href:"https://discord.gg/EW5JsGJfdt",children:"Discord"})]})]})]}),document.getElementById("root")),B()}},[[40,1,2]]]);
//# sourceMappingURL=main.781b81df.chunk.js.map