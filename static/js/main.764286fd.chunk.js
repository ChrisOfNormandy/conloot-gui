(this["webpackJsonpconloot-gui"]=this["webpackJsonpconloot-gui"]||[]).push([[0],[,function(e,t){var r={position:{x:0,y:0,old:{x:0,y:0}},button:{state:!1,id:0,origin:{x:null,y:null}},displacement:function(){return{x:null===r.position.old.x?0:r.position.x-r.position.old.x,y:null===r.position.old.y?0:r.position.y-r.position.old.y}},getPosition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?{x:r.position.x,y:r.position.y}:{x:r.position.x-e.x,y:r.position.y-e.y}},inBounds:!1,moving:!1,clicked:!1};e.exports=r},,,,,,,,,,,,,,,,,,,,,,,function(e,t,r){},function(e,t,r){},,,,,,,,,,,function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){},function(e,t,r){"use strict";r.r(t);var n=r(2),a=r.n(n),o=r(16),i=r.n(o),s=(r(24),r(25),r(3)),c=r(8),l=r(6),u=r(5),d=r(4),h=r(10),b=r(1),p=r.n(b);function g(e){var t=Number(e).toString(16);return 1===t.length?"0".concat(t):t}function f(e){return parseInt(e,16)}function v(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Number("0x".concat(g(e)).concat(g(t)).concat(g(r)).concat(null!==n?g(n):""))}function m(e){return v(e.r,e.g,e.b)}function y(e,t,r){return Math.floor(t*r+e*(1-r))}function x(e,t){return 0===e.a?t:0!==t.a&&t?{r:y(e.r,t.r,t.a/255),g:y(e.g,t.g,t.a/255),b:y(e.b,t.b,t.a/255),a:e.a+t.a>255?255:e.a+t.a}:e}var j=function e(t){var r=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Object(s.a)(this,e),this.visable=!0,this.opacity=255,this.pixels=[],this.clear=function(){r.pixels.forEach((function(e){return r.setPixel(e.x,e.y,null)}))},this.getPixel=function(e,t){return r.visable?r.pixels[t*r.resolution+e]?r.pixels[t*r.resolution+e]:null:{x:e,y:t,changed:r.pixels[t*r.resolution+e].changed,color:{r:0,g:0,b:0,a:0}}},this.toggle=function(){r.visable=!r.visable,r.editor.refresh=!0},this.updatePixel=function(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,i=r.getPixel(e,t);return null===i||i.changed&&!a?null:(null===o?(i.color=null===n?{r:0,g:0,b:0,a:0}:x(i.color,n),i.changed=!0):i.color.a=i.color.a/255*o,i)},this.setPixel=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return r.pixels[t*r.resolution+e]={color:null===n?{r:0,g:0,b:0,a:0}:n,x:e,y:t,changed:!1},r.pixels[t*r.resolution+e]},this.editor=t,this.resolution=t.resolution,null===n){var a=this.editor.layers.cache.map((function(e){return e.name}));if(a.length){var o=1;for(this.name="Layer ".concat(o);a.includes(this.name);)this.name="Layer ".concat(o),o++}else this.name="Layer 1"}else this.name=n;for(var i=0;i<t.resolution;i++)for(var c=0;c<t.resolution;c++)this.setPixel(i,c)};var O=h.c.shared,C=h.b,w={app:null,brush:{style:"pencil",fill:{r:0,g:0,b:0,a:255},size:1,mousePos:null,cursor:{position:{x:0,y:0,old:{x:0,y:0}},graphic:null,focus:null},getStyle:function(){return w.brush.style},setStyle:function(e){switch(e){case"eraser":w.brush.cursor.graphic.tint=16777215,w.brush.cursor.graphic.alpha=1;break;default:w.brush.cursor.graphic.tint=v(w.brush.fill.r,w.brush.fill.g,w.brush.fill.b),w.brush.cursor.graphic.alpha=w.brush.fill.a/255}w.brush.style=e},getColor:function(){return{r:w.brush.fill.r,g:w.brush.fill.g,b:w.brush.fill.b,a:w.brush.fill.a}},setColor:function(e){w.brush.cursor.graphic.tint=v(e.r,e.g,e.b),w.brush.cursor.graphic.alpha=e.a/255,w.brush.fill=e},getSize:function(){return w.brush.size},setSize:function(e){w.brush.size=e},updateCursor:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];w.brush.mousePos=p.a.getPosition(),w.brush.cursor.position.old.x=w.brush.cursor.position.x,w.brush.cursor.position.old.y=w.brush.cursor.position.y,w.brush.cursor.position.x=Math.floor((w.brush.mousePos.x-(w.brush.size-1)/2*w.scale)/w.scale),w.brush.cursor.position.y=Math.floor((w.brush.mousePos.y-(w.brush.size-1)/2*w.scale)/w.scale),w.brush.cursor.position.old.x===w.brush.cursor.position.x&&w.brush.cursor.position.old.y===w.brush.cursor.position.y||(w.brush.cursor.graphic.x=w.brush.cursor.position.x*w.scale,w.brush.cursor.graphic.y=w.brush.cursor.position.y*w.scale),t&&(w.brush.cursor.graphic.width=w.scale*w.brush.size,w.brush.cursor.graphic.height=w.scale*w.brush.size),e&&(w.brush.cursor.graphic.tint=v(w.brush.fill.r,w.brush.fill.g,w.brush.fill.b),w.brush.cursor.graphic.alpha=w.brush.fill.a/255)}},background:[],resolution:0,width:0,height:0,scale:0,debug:{enabled:!0,element:document.getElementById("debug")},pixels:[],layers:{cache:[],active:0,get:function(e){return w.layers.cache[e]},getActive:function(){return w.layers.cache[w.layers.active]},add:function(){var e=w.layers.cache.length;w.layers.cache.push(new j(k)),w.layers.active=e},remove:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return w.layers.cache.splice(e,1),w.layers.reload(),w.layers},move:function(e,t){var r=w.layers.cache.splice(e,1)[0];w.layers.cache.splice(t,0,r),w.layers.reload()},clear:function(){w.layers.cache=[]},toggle:function(e){w.layers.cache[e].visable=!w.layers.cache[e].visable,w.layers.reload()},reload:function(){w.refresh=!0}},buffer:[],showGrid:!1,refresh:!1,doBoundUpdate:!0,bounds:null,updateBounds:function(){w.bounds=w.app.view.getBoundingClientRect(),w.doBoundUpdate=!1},startup:function(){return w.onReady((function(){return w.app.ticker.add((function(){return w.draw()}))})),w.app.view},onReady:function(e){console.log("App ready. Loading."),O.load(e)},clear:function(){w.layers.cache.forEach((function(e){return e.clear()})),w.refresh=!0},updateDebug:function(){var e=p.a.getPosition(),t=Math.floor(e.x/w.scale),r=Math.floor(e.y/w.scale),n=w.pixels[r*w.resolution+t];n&&(w.debug.element.innerHTML="Mouse: ".concat(JSON.stringify(e)," --\x3e ").concat(t,", ").concat(r,"<br />")+"Brush:<br />"+" - Color: ".concat(JSON.stringify(w.brush.fill),"<br />")+" - Pos: ".concat(w.brush.cursor.position.x,", ").concat(w.brush.cursor.position.y," --\x3e ").concat(w.brush.cursor.position.x+w.brush.size-1,", ").concat(w.brush.cursor.position.y+w.brush.size-1,"<br />")+" - Hex: 0x".concat(g(w.brush.fill.r)).concat(g(w.brush.fill.g)).concat(g(w.brush.fill.b),"<br />")+" - Style: ".concat(w.brush.style,"<br />")+"Buffer: ".concat(w.buffer.length,"<br />")+"Hover: ".concat(JSON.stringify(n.color),"<br />")+" - Tint:".concat(n.graphic.tint,"<br />")+" - Alpha: ".concat(n.graphic.alpha))},updatePixel:function(e,t){w.pixels[t*w.resolution+e]||w.setPixel(e,t);var r=null;w.layers.cache.forEach((function(n){if(n.visable){var a=n.getPixel(e,t).color;0!==a.a&&(r=null===r?a:x(a,r))}})),w.pixels[t*w.resolution+e].color=r||{r:0,g:0,b:0,a:0},w.pixels[t*w.resolution+e].graphic.tint=m(w.pixels[t*w.resolution+e].color),w.pixels[t*w.resolution+e].graphic.alpha=w.pixels[t*w.resolution+e].color.a/255},draw:function(){if(null!==w.debug.element){if(w.debug.enabled?(w.debug.element.classList.contains("hidden")&&w.debug.element.classList.remove("hidden"),w.updateDebug()):w.debug.element.classList.contains("hidden")||w.debug.element.classList.add("hidden"),w.refresh)return w.pixels.forEach((function(e){w.updatePixel(e.x,e.y),w.app.stage.removeChild(e.graphic),w.app.stage.addChild(e.graphic)})),w.app.stage.removeChild(w.brush.cursor.graphic),w.app.stage.addChild(w.brush.cursor.graphic),void(w.refresh=!1);w.buffer.forEach((function(e,t){w.updatePixel(e.x,e.y),e.changed?p.a.button.state||(e.changed=!1):w.buffer.splice(t,1)})),w.brush.updateCursor();var e,t,r,n,a,o,i=w.layers.getActive();if(i&&p.a.button.state&&0===p.a.button.id)switch(w.brush.style){case"fill":console.log(w.brush.cursor.position);break;default:for(var s=w.brush.cursor.position.x<0?0:w.brush.cursor.position.x;s<w.brush.cursor.position.x+w.brush.size&&s<w.resolution;s++)for(var c=w.brush.cursor.position.y<0?0:w.brush.cursor.position.y;c<w.brush.cursor.position.y+w.brush.size&&c<w.resolution;c++){switch(w.brush.style){case"paint":(t=w.brush.getColor()).a=w.brush.fill.a/255*Math.floor(255*(1-(a={x:w.brush.cursor.position.x+Math.floor(w.brush.size/2),y:w.brush.cursor.position.y+Math.floor(w.brush.size/2)},o={x:s,y:c},(Math.abs(o.x-a.x)+Math.abs(o.y-a.y))/Math.round(w.brush.size/2)))),t.a<0&&(t.a=0),r=w.brush.cursor.position.old.x!==w.brush.cursor.position.x||w.brush.cursor.position.old.y!==w.brush.cursor.position.y,n=null;break;case"eraser":t=null,r=w.brush.cursor.position.old.x!==w.brush.cursor.position.x||w.brush.cursor.position.old.y!==w.brush.cursor.position.y,n=0;break;default:t=w.brush.getColor(),r=!1,n=null}null!==(e=i.updatePixel(s,c,t,r,n))&&w.buffer.push(e)}}p.a.inBounds||(p.a.button.state=!1),p.a.clicked=!1}else w.debug.element=document.getElementById("debug")},compose:function(){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=w.resolution,e.height=w.resolution;for(var r,n=t.createImageData(w.resolution,w.resolution),a=0;a<w.resolution;a++)for(var o=0;o<w.resolution;o++){var i=4*(o*w.resolution+a);r=w.getPixel(a,o).color,n.data[i]=r.r,n.data[i+1]=r.g,n.data[i+2]=r.b,n.data[i+3]=r.a}t.putImageData(n,0,0);var s=e.toDataURL("image/png"),c=document.createElement("a");c.href=s;var l=document.getElementById("image_name").value;c.setAttribute("download","".concat(l||"texture",".png")),c.click()},setPixel:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return w.pixels[t*w.resolution+e]={graphic:new C,color:null===r?{r:0,g:0,b:0,a:0}:r,changed:!1,x:e,y:t},w.pixels[t*w.resolution+e].graphic.beginFill(16777215),w.pixels[t*w.resolution+e].graphic.drawRect(0,0,w.scale,w.scale),w.pixels[t*w.resolution+e].graphic.endFill(),w.pixels[t*w.resolution+e].graphic.tint=m(w.pixels[t*w.resolution+e].color),w.pixels[t*w.resolution+e].graphic.alpha=w.pixels[t*w.resolution+e].color.a/255,w.pixels[t*w.resolution+e].graphic.x=e*w.scale,w.pixels[t*w.resolution+e].graphic.y=t*w.scale,w.pixels[t*w.resolution+e]},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;if(null!==w.app)for(;w.app.stage.children[0];)w.app.stage.removeChild(w.app.stage.children[0]);w.app=e,w.resolution=t,w.width=e.view.width,w.height=e.view.height,w.scale=w.width/w.resolution,w.pixels=[],w.layers.clear(),w.layers.add(),w.brush.cursor.graphic=new C,w.brush.cursor.graphic.beginFill(16777215),w.brush.cursor.graphic.drawRect(-1,-1,w.scale+3,w.scale+3),w.brush.cursor.graphic.endFill(),w.brush.updateCursor(!0,!0);for(var r=w.layers.get(w.layers.active),n=0;n<w.resolution;n++)for(var a=0;a<w.resolution;a++)w.background[a*w.resolution+n]=new C,w.background[a*w.resolution+n].beginFill(16777215),w.background[a*w.resolution+n].drawRect(0,0,w.scale,w.scale),w.background[a*w.resolution+n].endFill(),w.background[a*w.resolution+n].tint=n%2===0&&a%2===1||n%2===1&&a%2===0?16777215:14540253,w.background[a*w.resolution+n].x=n*w.scale,w.background[a*w.resolution+n].y=a*w.scale,w.app.stage.addChild(w.background[a*w.resolution+n]),w.app.stage.addChild(w.setPixel(n,a).graphic),r.setPixel(n,a,w.pixels[a*w.resolution+n].color);return w.app.stage.addChild(w.brush.cursor.graphic),w}},k=w,_=r(0);var N=function(e){return Object(_.jsx)("div",{id:e.id,className:"menu".concat(e.hidden?" hidden":""),children:e.content.map((function(e,t){return Object(_.jsx)("div",{className:"menu-item",children:e},t)}))})},B=(r(36),function(e){Object(u.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).state={editor:null,content:[{key:"File",id:"file_menu",value:Object(_.jsx)(N,{content:[Object(_.jsx)("div",{className:"menu-button",onClick:function(){return n.editor.compose()},children:"Download"}),Object(_.jsx)("div",{className:"menu-break"}),Object(_.jsxs)("div",{className:"menu-button",children:[Object(_.jsx)("label",{id:"debug_check_label",htmlFor:"debug-check",children:"Debug"}),Object(_.jsx)("input",{name:"debug-check",type:"checkbox",onChange:function(e){n.editor.debug=e.target.checked}})]})],id:"file_menu",hidden:!0})},{key:"Edit",id:"edit_menu",value:Object(_.jsx)(N,{content:[Object(_.jsx)("div",{className:"menu-button",onClick:function(){return n.editor.clear()},children:"Clear"})],id:"edit_menu",hidden:!0})},{key:"View",id:"view_menu",value:Object(_.jsx)(N,{content:[Object(_.jsx)("div",{className:"menu-button",onClick:function(){n.editor.showGrid=!n.editor.showGrid,n.editor.refresh=!0},children:"Toggle Grid"})],id:"view_menu",hidden:!0})}]},n.componentDidMount=function(){var e=[];n.state.content.forEach((function(t){return e.push(document.getElementById(t.id))})),document.addEventListener("click",(function(t){e.forEach((function(e){e.parentElement.contains(t.target)||e.classList.add("hidden")}))}))},n.render=function(){return Object(_.jsx)("div",{className:"texture-editor-ribbon",children:n.state.content.map((function(e){return Object(_.jsxs)("div",{className:"ribbon-menu",children:[Object(_.jsx)("div",{className:"ribbon-menu-button",onClick:function(){document.getElementById(e.id).classList.toggle("hidden")},children:e.key}),e.value]},e.key)}))})},n.state.editor=e.editor,n.setResolution=n.setResolution.bind(Object(l.a)(n)),n}return Object(c.a)(r,[{key:"setResolution",value:function(e){e.preventDefault();var t=Number(document.getElementById("resolution_input").value);if(!isNaN(t)){var r=this.state;t%16===0&&t>0&&t<=128&&(r.editor=r.editor.create(this.editor.app,t)),this.setState(r)}}}]),r}(a.a.Component)),E=(r(37),r.p+"static/media/pencil.34dc5e45.svg"),L=r.p+"static/media/paintbrush.3b3671d0.svg",P=r.p+"static/media/eraser.4da23591.svg",I=function(e){Object(u.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).brushes=[{key:"pencil",icon:E},{key:"paint",icon:L},{key:"eraser",icon:P},{key:"fill",icon:E}],n.render=function(){return Object(_.jsx)("div",{className:"brushes-container",children:n.brushes.map((function(e){return Object(_.jsx)("img",{src:e.icon,className:"brush-icon",id:"".concat(e.key,"_brush"),alt:e.key,onClick:function(){return n.brush.setStyle(e.key)}},e.key)}))})},n.brush=e.brush,n}return r}(a.a.Component);r(38),r(39);var M=function(e){if(null===e)return console.error("Collapsable div was null.");e.style.maxHeight=e.style.maxHeight?null:e.scrollHeight+"px"};function D(e){return e.content()}var S=function(e){var t=e.id,r=e.content,n=document.getElementById(t);return Object(_.jsxs)("div",{className:"collapsable-container-wrapper",onLoad:function(){var e=document.getElementById(t);e.style.maxHeight=e.scrollHeight+"px"},children:[Object(_.jsx)("div",{className:"collapsable-container-group container-group",id:t,children:Object(_.jsx)(D,{content:r})}),Object(_.jsx)("div",{className:"collapsable-container-group-trigger",onClick:function(){M(n)}})]})},z=(r(40),function(e){Object(u.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).state={brush:null},n.previewElem=null,n.container=null,n.updatePreview=function(){var e=n.state.brush.getColor();n.previewElem.style.backgroundColor="rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(e.a/255,")")},n.updateHex=function(){var e=function(e,t,r){var n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return"".concat(g(e)).concat(g(t)).concat(g(r)).concat(null!==n?g(n):"")}(document.getElementById("rgb_r").value,document.getElementById("rgb_g").value,document.getElementById("rgb_b").value,document.getElementById("rgb_a").value);document.getElementById("hex").value=e},n.fetchDisplayColor=function(){return{r:document.getElementById("rgb_r").value,g:document.getElementById("rgb_g").value,b:document.getElementById("rgb_b").value,a:document.getElementById("rgb_a").value}},n.refresh=function(){n.previewElem=document.getElementById("color_picker_preview"),n.container=document.getElementById("color_picker_controls_container")},n.rgbControls=function(){return Object(_.jsxs)("div",{className:"rgb-container-wrapper",children:[["r","g","b","a"].map((function(e){return Object(_.jsxs)("div",{className:"rgb-input-container",children:[Object(_.jsx)("div",{htmlFor:"rgb_".concat(e),className:"rgb-input-label",children:e.toUpperCase()}),Object(_.jsx)("input",{name:"rgb_".concat(e,"_slider"),type:"range",min:"0",max:"255",className:"rgb-input-slider",onChange:function(t){document.getElementById("rgb_".concat(e)).value=t.target.value,n.updateColor(n.fetchDisplayColor()),n.updatePreview(),n.updateHex()},defaultValue:"a"===e?255:0},"".concat(e,"_slider")),Object(_.jsx)("input",{name:"rgb_".concat(e),id:"rgb_".concat(e),type:"text",className:"rgb-input-field",placeholder:"0",onChange:function(e){n.updateColor(n.fetchDisplayColor()),n.updatePreview(),n.updateHex()},onKeyPress:function(e){e.key.match(/[0-9]/)||e.preventDefault()},defaultValue:"a"===e?255:""},e)]},"rgb_".concat(e,"_div"))})),Object(_.jsx)("input",{name:"hex",id:"hex",type:"text",className:"hex-input-field",placeholder:"000000ff",onChange:function(e){var t=function(e){switch(e.length){case 0:return{r:0,g:0,b:0,a:255};case 1:return{r:f(e),g:f(e),b:f(e),a:255};case 3:var t=e.split("");return{r:f("".concat(t[0]+t[0])),g:f("".concat(t[1]+t[1])),b:f("".concat(t[2]+t[2])),a:255};case 4:var r=e.split("");return{r:f("".concat(r[0]+r[0])),g:f("".concat(r[1]+r[1])),b:f("".concat(r[2]+r[2])),a:f("".concat(r[3]+r[3]))};case 6:var n=e.split("");return{r:f("".concat(n[0]+n[1])),g:f("".concat(n[2]+n[3])),b:f("".concat(n[4]+n[5]))};case 8:var a=e.split("");return{r:f("".concat(a[0]+a[1])),g:f("".concat(a[2]+a[3])),b:f("".concat(a[4]+a[5])),a:f("".concat(a[6]+a[7]))};default:return{r:0,g:0,b:0,a:255}}}(e.target.value);for(var r in t)document.getElementById("rgb_".concat(r)).value=t[r];n.updateColor(n.fetchDisplayColor()),n.updatePreview()},onKeyPress:function(e){(!e.key.match(/[0-9A-Fa-f]/)||e.target.value.length>=8)&&e.preventDefault()},defaultValue:"000000ff"})]})},n.render=function(){return Object(_.jsxs)("div",{className:"side-bar-group",children:[Object(_.jsxs)("div",{className:"container-group",id:"color_picker_preview_container",children:[Object(_.jsx)("div",{className:"color-picker-preview",id:"color_picker_preview"}),Object(_.jsx)("div",{className:"brush-size-preview",id:"brush_size_preview"}),Object(_.jsx)("input",{className:"brush-size-input",id:"brush_size_input",type:"text",defaultValue:1,onChange:function(e){n.state.brush.setSize(Number(e.target.value))},onKeyPress:function(e){null===e.key.match(/[0-9]/)&&e.preventDefault()}})]}),Object(_.jsx)(S,{id:"color_picker_container",content:n.rgbControls})]})},n.state.brush=e.brush,n.updateColor=e.updateColor.bind(Object(l.a)(n)),n.fetchDisplayColor=n.fetchDisplayColor.bind(Object(l.a)(n)),n}return Object(c.a)(r,[{key:"componentDidMount",value:function(){this.refresh(),this.updatePreview()}}]),r}(a.a.Component)),A=r.p+"static/media/eye-open.157d1f69.svg",R=r.p+"static/media/minus.e3517047.svg",F=(r(41),function(e){Object(u.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).state={layers:null},n.container=null,n.updateActiveLayer=function(e){var t=n.state;t.layers.active=e;for(var r=t.layers.cache.length-1;r>=0;)r!==e?document.getElementById("layer_".concat(r)).classList.remove("layer-item-selected"):document.getElementById("layer_".concat(r)).classList.add("layer-item-selected"),r--;n.setState(t)},n.updateLayerViewable=function(e){var t=n.state;t.layers.get(e).toggle(),document.getElementById("layer_".concat(e,"_viewable")).classList.toggle("layer-item-viewable"),n.setState(t)},n.layerMovementButtons=function(e,t){return Object(_.jsxs)("div",{className:"layer-item-movement-group",children:[Object(_.jsx)("div",{id:"layer_item_move_up",className:"layer-item-movement-button".concat(0===e?" hidden":""),onClick:function(){var t=n.state;t.layers.move(e,e-1),n.setState(t),n.updateActiveLayer(e-1)},children:"/\\"}),Object(_.jsx)("div",{id:"layer_item_move_down",className:"layer-item-movement-button".concat(e===t?" hidden":""),onClick:function(){var t=n.state;t.layers.move(e,e+1),n.setState(t),n.updateActiveLayer(e+1)},children:"\\/"})]})},n.refresh=function(){n.container=document.getElementById("layers_controls_container")},n.layerControls=function(){return Object(_.jsxs)("div",{children:[n.state.layers.cache.map((function(e,t){return Object(_.jsxs)("div",{className:"layer-item".concat(t===n.state.layers.active?" layer-item-selected":""),id:"layer_".concat(t),onClick:function(e){e.target.childNodes>0&&n.updateActiveLayer(t)},children:[n.layerMovementButtons(t,n.state.layers.cache.length-1),Object(_.jsx)("input",{type:"text",className:"layer-item-title",placeholder:"Layer ".concat(t+1),value:e.name,onChange:function(e){var r=n.state;r.layers.get(t).name=e.target.value,n.setState(r)}}),Object(_.jsx)("img",{src:A,alt:"Hide",className:"layer-item-button",id:"layer_".concat(t,"_viewable"),onClick:function(){n.updateLayerViewable(t)}}),Object(_.jsx)("img",{src:R,alt:"Remove",className:"layer-item-button",onClick:function(){var e=n.state;e.layers=e.layers.remove(t),n.setState(n.state)}})]},t)})),Object(_.jsx)("div",{className:"layer-add-item",onClick:function(){n.state.layers.add(),n.setState(n.state)},children:"Add Layer"})]})},n.render=function(){return Object(_.jsx)("div",{className:"side-bar-group",children:Object(_.jsx)(S,{id:"layer_container",content:n.layerControls})})},n.state.layers=e.layers,n.updateActiveLayer=n.updateActiveLayer.bind(Object(l.a)(n)),n.updateLayerViewable=n.updateLayerViewable.bind(Object(l.a)(n)),n.layerMovementButtons=n.layerMovementButtons.bind(Object(l.a)(n)),n}return Object(c.a)(r,[{key:"componentDidMount",value:function(){this.refresh(),this.updateActiveLayer(0)}}]),r}(a.a.Component)),H=function(e){Object(u.a)(r,e);var t=Object(d.a)(r);function r(e){var n;return Object(s.a)(this,r),(n=t.call(this,e)).state={brush:null,layers:null},n.group=function(e,t){return Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{className:"side-bar-group-title",children:e}),t]})},n.render=function(){return Object(_.jsx)("div",{className:"side-bar-container",children:Object(_.jsxs)("ul",{className:"side-bar-group-list",children:[Object(_.jsx)("li",{className:"side-bar-group",children:n.group("COLORS",Object(_.jsx)(z,{updateColor:n.updateColor,brush:n.state.brush}))}),Object(_.jsx)("li",{className:"side-bar-group",children:n.group("LAYERS",Object(_.jsx)(F,{layers:n.state.layers}))}),Object(_.jsx)("li",{className:"side-bar-group",children:Object(_.jsx)("div",{className:"debug",id:"debug"})})]})})},n.state.brush=e.brush,n.state.layers=e.layers,n.updateColor=e.updateColor,n}return r}(a.a.Component),V=(r(42),null),J=function(e){Object(u.a)(r,e);var t=Object(d.a)(r);function r(){var e;return Object(s.a)(this,r),(e=t.call(this)).state={app:null,canvas:null,doBoundUpdate:!0,editor:k},e.getCanvas=function(){var t=document.getElementById("texture_editor_wrapper"),r=t.getBoundingClientRect().height<t.getBoundingClientRect().width?.9*t.getBoundingClientRect().height:.9*t.getBoundingClientRect().width,n=e.state;n.app=new h.a({width:r,height:r}),n.editor=k.create(n.app,16),n.app.view.oncontextmenu=function(e){e.preventDefault(),e.stopPropagation()},n.app.view.id="editor",n.canvas=n.editor.startup(),t.appendChild(n.canvas),e.setState(n)},e.componentDidMount=function(){e.getCanvas(),e.state.editor.updateBounds(),e.state.canvas.addEventListener("mousemove",(function(t){p.a.position.old={x:Math.floor(p.a.position.x),y:Math.floor(p.a.position.y)},p.a.position.x=Math.floor(t.clientX-e.state.editor.bounds.left),p.a.position.y=Math.floor(t.clientY-e.state.editor.bounds.top),p.a.moving=!0,V&&clearTimeout(V),V=setTimeout((function(){p.a.position.old={x:Math.floor(p.a.position.x),y:Math.floor(p.a.position.y)},p.a.moving=!1}),30)})),e.state.canvas.addEventListener("mousedown",(function(e){p.a.button.state=!0,p.a.button.id=e.button})),e.state.canvas.addEventListener("mouseup",(function(){p.a.button.state=!1,p.a.button.id=null})),e.state.canvas.addEventListener("mouseleave",(function(){return p.a.inBounds=!1})),e.state.canvas.addEventListener("mouseenter",(function(){return p.a.inBounds=!0})),e.state.canvas.addEventListener("click",(function(){return p.a.clicked=!0})),window.addEventListener("resize",(function(){return e.state.editor.updateBounds()}))},e.render=function(){return Object(_.jsxs)("div",{className:"editor-container",children:[Object(_.jsx)(I,{brush:e.state.editor.brush}),Object(_.jsxs)("div",{className:"texture-editor-container",id:"texture_editor_container",children:[Object(_.jsx)(B,{editor:e.state.editor}),Object(_.jsx)("div",{className:"texture-editor-wrapper",id:"texture_editor_wrapper"}),Object(_.jsxs)("div",{className:"texture-editor-controls",children:[Object(_.jsx)("label",{htmlFor:"texture-name-input",children:"File name:"}),Object(_.jsx)("input",{type:"text",name:"texture-name-input",id:"image_name",defaultValue:"texture",onKeyPress:function(e){e.key.match(/[\w\d.()]/)||e.preventDefault()}})]})]}),Object(_.jsx)(H,{brush:e.state.editor.brush,updateColor:e.updateColor,layers:e.state.editor.layers})]})},e.updateColor=e.updateColor.bind(Object(l.a)(e)),e.fetchBrush=e.fetchBrush.bind(Object(l.a)(e)),e}return Object(c.a)(r,[{key:"fetchBrush",value:function(){return this.state.editor.brush}},{key:"updateColor",value:function(e){var t=this.state,r=t.editor.brush.getColor();for(var n in e)r[n]=""===e[n]?0:Number(e[n]);t.editor.brush.setColor(r),this.setState(t)}}]),r}(a.a.Component);var T=function(){return Object(_.jsx)("div",{className:"App",children:Object(_.jsx)(J,{})})},G=function(e){e&&e instanceof Function&&r.e(3).then(r.bind(null,45)).then((function(t){var r=t.getCLS,n=t.getFID,a=t.getFCP,o=t.getLCP,i=t.getTTFB;r(e),n(e),a(e),o(e),i(e)}))},U=(r(43),function(e){Object(u.a)(r,e);var t=Object(d.a)(r);function r(){var e;Object(s.a)(this,r);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).render=function(){return Object(_.jsx)("div",{className:"nav-bar"})},e}return r}(a.a.Component));i.a.render(Object(_.jsxs)(a.a.StrictMode,{children:[Object(_.jsx)("header",{children:Object(_.jsx)(U,{})}),Object(_.jsx)("main",{children:Object(_.jsx)(T,{})}),Object(_.jsxs)("footer",{children:[Object(_.jsx)("div",{children:"Built by ChrisOfNormandy."}),Object(_.jsxs)("div",{children:["Join ",Object(_.jsx)("a",{href:"https://discord.gg/EW5JsGJfdt",children:"Discord"})]})]})]}),document.getElementById("root")),G()}],[[44,1,2]]]);
//# sourceMappingURL=main.764286fd.chunk.js.map