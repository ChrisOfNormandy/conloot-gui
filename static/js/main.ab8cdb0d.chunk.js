(this["webpackJsonpconloot-gui"]=this["webpackJsonpconloot-gui"]||[]).push([[0],{1:function(e,t){var o={position:{x:0,y:0,old:{x:0,y:0}},button:{state:!1,id:0,origin:{x:null,y:null}},displacement:function(){return{x:null===o.position.old.x?0:o.position.x-o.position.old.x,y:null===o.position.old.y?0:o.position.y-o.position.old.y}},getPosition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?{x:o.position.x,y:o.position.y}:{x:o.position.x-e.x,y:o.position.y-e.y}},inBounds:!1,moving:!1,clicked:!1};e.exports=o},24:function(e,t,o){},25:function(e,t,o){},26:function(e,t,o){},37:function(e,t,o){},38:function(e,t,o){"use strict";o.r(t);var n=o(3),r=o.n(n),a=o(15),i=o.n(a),l=(o(24),o(25),o(7)),c=o(9),u=o(8),s=(o(26),o(0)),d=function(e){Object(c.a)(o,e);var t=Object(u.a)(o);function o(){var e;Object(l.a)(this,o);for(var n=arguments.length,r=new Array(n),a=0;a<n;a++)r[a]=arguments[a];return(e=t.call.apply(t,[this].concat(r))).render=function(){return Object(s.jsx)("div",{className:"nav-bar"})},e}return o}(r.a.Component),p=o(16),g=o(6),b=o(4),h=o(1),x=o.n(h),f=b.c.shared,v=b.b;function m(e){var t=Number(e).toString(16);return 1===t.length?"0".concat(t):t}var j={app:null,currentColor:{r:0,g:0,b:0,a:255},resolution:0,background:[],width:0,height:0,scale:0,debug:!1,debugElem:document.getElementById("debug"),previewElem:null,pixels:[],showGrid:!1,refresh:!0,doBoundUpdate:!0,bounds:null,type:"WebGL",getCurrentColor:function(){var e=j.currentColor;return j.previewElem.fillStyle="rgb(".concat(e.r,", ").concat(e.g,", ").concat(e.b,")"),j.previewElem.fillRect(0,0,32,32),{r:j.currentColor.r,g:j.currentColor.g,b:j.currentColor.b,a:j.currentColor.a}},updateBounds:function(){var e=j.app.view.getBoundingClientRect();j.bounds={x:e.x,y:e.y,left:e.left,right:e.right,top:e.top,bottom:e.bottom,width:e.width,height:e.height},j.doBoundUpdate=!1,j.refresh=!0},startup:function(){return j.onReady((function(){return j.app.ticker.add((function(){return j.draw()}))})),j.app.view},onReady:function(e){console.log("App ready. Loading."),b.d.isWebGLSupported()||(j.type="canvas"),b.d.sayHello(j.type),f.load(e)},updateDebug:function(){if(null===j.debugElem&&(j.debugElem=document.getElementById("debug")),j.debug){var e=x.a.getPosition();j.debugElem.innerHTML="Mouse: ".concat(JSON.stringify(e)," --\x3e ").concat(Math.floor(e.x/j.resolution),", ").concat(Math.floor(e.y/j.resolution),"<br />")+"Color: ".concat(JSON.stringify(j.currentColor),"<br />")+"0x".concat(j.decToHex(j.currentColor.r)).concat(j.decToHex(j.currentColor.g)).concat(j.decToHex(j.currentColor.b))}else j.debugElem.innerHTML=""},draw:function(){j.updateDebug();for(var e=0;e<j.resolution;e++)for(var t=0;t<j.resolution;t++)j.refresh&&j.setPixel(e,t,j.getPixel(e,t).color),j.getPixel(e,t).update&&(j.app.stage.removeChild(j.getPixel(e,t).graphic),j.getPixel(e,t).color.a<255?j.app.stage.addChild(j.background[t*j.resolution+e]):j.app.stage.removeChild(j.background[t*j.resolution+e]),j.getPixel(e,t).color.a>0&&j.app.stage.addChild(j.getPixel(e,t).graphic),j.getPixel(e,t).update=!1);if(x.a.button.state){var o=x.a.getPosition(),n=Math.floor(o.x/j.scale),r=Math.floor(o.y/j.scale);n>=0&&n<j.resolution&&r>=0&&r<j.resolution&&(0===x.a.button.id?j.setPixel(n,r,j.getCurrentColor()):2===x.a.button.id&&j.setPixel(n,r,{r:0,g:0,b:0,a:0}),j.getPixel(n,r).update=!0),x.a.inBounds||(x.a.button.state=!1)}j.refresh=!1},clear:function(){for(var e=0;e<j.resolution;e++)for(var t=0;t<j.resolution;t++)j.setPixel(e,t,null)},getPixel:function(e,t){return j.pixels[e]&&j.pixels[e][t]?j.pixels[e][t]:null},setPixel:function(e,t,o){j.getPixel(e,t)||(j.pixels[e][t]={color:o,graphic:new v});var n,r,a,i=j.getPixel(e,t);return i.graphic=new v,j.showGrid&&i.graphic.lineStyle(1,0,1),null===o?i.graphic.beginFill(0):i.graphic.beginFill((n=o.r,r=o.g,a=o.b,Number("0x".concat(m(n)).concat(m(r)).concat(m(a))))),i.graphic.drawRect(0,0,j.scale,j.scale),i.graphic.endFill(),i.graphic.alpha=null===o?0:o.a/255,i.graphic.x=e*j.scale,i.graphic.y=t*j.scale,i.update=!0,i.color=null===o?{r:0,g:0,b:0,a:0}:o,i},compose:function(){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=j.resolution,e.height=j.resolution;for(var o,n=t.createImageData(j.resolution,j.resolution),r=0;r<j.resolution;r++)for(var a=0;a<j.resolution;a++){var i=4*(a*j.resolution+r);o=j.getPixel(r,a).color,n.data[i]=o.r,n.data[i+1]=o.g,n.data[i+2]=o.b,n.data[i+3]=o.a}t.putImageData(n,0,0);var l=e.toDataURL("image/png"),c=document.createElement("a");c.href=l;var u=document.getElementById("image_name").value;c.setAttribute("download","".concat(u||"texture",".png")),c.click()},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;j.app=e,j.previewElem=document.getElementById("color_picker_display").getContext("2d"),j.getCurrentColor(),j.resolution=t,j.width=e.view.width,j.height=e.view.height,j.scale=j.width/j.resolution,j.pixels=[];for(var o=0;o<j.resolution;o++){j.pixels[o]=[];for(var n=0;n<j.resolution;n++)j.background[n*j.resolution+o]=new v,j.background[n*j.resolution+o].beginFill(16777215),j.background[n*j.resolution+o].drawRect(0,0,j.scale,j.scale),j.background[n*j.resolution+o].endFill(),j.background[n*j.resolution+o].tint=o%2===0&&n%2===1||o%2===1&&n%2===0?16777215:14540253,j.background[n*j.resolution+o].x=o*j.scale,j.background[n*j.resolution+o].y=n*j.scale,j.setPixel(o,n,{r:Math.floor(255*o/(j.resolution-1)),g:Math.floor((o+n)/2*255/(j.resolution-1)),b:Math.floor(255*n/(j.resolution-1)),a:Math.floor(255-Math.abs((255*o/(j.resolution-1)+255*n/(j.resolution-1))/2-128))})}return j}},y=j,C=(o(37),null),w=function(e){Object(c.a)(o,e);var t=Object(u.a)(o);function o(){var e;return Object(l.a)(this,o),(e=t.call(this)).state={app:null,canvas:null,doBoundUpdate:!0,editor:y},e.getCanvas=function(){var t=document.getElementById("texture_editor_wrapper"),o=.5*t.getBoundingClientRect().width,n=e.state;n.app=new b.a({width:o,height:o}),n.editor=y.create(n.app,16),n.app.view.oncontextmenu=function(e){e.preventDefault(),e.stopPropagation()},n.app.view.id="editor",n.canvas=n.editor.startup(),t.appendChild(n.canvas),e.setState(n)},e.componentDidMount=function(){e.getCanvas(),e.state.editor.updateBounds(),e.state.canvas.addEventListener("mousemove",(function(t){x.a.position.old={x:Math.floor(x.a.position.x),y:Math.floor(x.a.position.y)},x.a.position.x=Math.floor(t.clientX-e.state.editor.bounds.left),x.a.position.y=Math.floor(t.clientY-e.state.editor.bounds.top),x.a.moving=!0,C&&clearTimeout(C),C=setTimeout((function(){x.a.position.old={x:Math.floor(x.a.position.x),y:Math.floor(x.a.position.y)},x.a.moving=!1}),30)})),e.state.canvas.addEventListener("mousedown",(function(e){x.a.button.state=!0,x.a.button.id=e.button})),e.state.canvas.addEventListener("mouseup",(function(){x.a.button.state=!1,x.a.button.id=null})),e.state.canvas.addEventListener("mouseleave",(function(){return x.a.inBounds=!1})),e.state.canvas.addEventListener("mouseenter",(function(){return x.a.inBounds=!0})),e.state.canvas.addEventListener("click",(function(){return x.a.clicked=!0})),window.addEventListener("resize",(function(){e.state.editor.updateBounds()}))},e.render=function(){return Object(s.jsxs)("div",{children:[Object(s.jsxs)("div",{className:"texture-editor-container",id:"texture_editor_container",children:[Object(s.jsx)("div",{className:"texture-editor-wrapper",id:"texture_editor_wrapper"}),Object(s.jsxs)("div",{className:"color-picker-container",children:[Object(s.jsx)("canvas",{className:"color-picker-display",id:"color_picker_display",width:"32px",height:"32px"}),["r","g","b","a"].map((function(t){return Object(s.jsxs)("div",{className:"rgb-input-container",children:[Object(s.jsx)("label",{htmlFor:"rgb_".concat(t),className:"rgb-input-label",children:t}),Object(s.jsx)("input",{name:"rgb_".concat(t),type:"text",className:"rgb-input-field",placeholder:"0",onChange:e.updateColor,onKeyPress:function(e){e.key.match(/[0-9]/)||e.preventDefault()},defaultValue:"a"===t?255:""},t)]},"rgb_".concat(t,"_div"))}))]}),Object(s.jsxs)("div",{className:"texture-editor-controls",children:[Object(s.jsx)("button",{onClick:function(){var t=e.state;t.editor.showGrid=!t.editor.showGrid,t.editor.refresh=!0,e.setState(t)},children:"Toggle Grid"}),Object(s.jsx)("button",{onClick:function(){return e.state.editor.clear()},children:"Clear"}),Object(s.jsxs)("form",{children:[Object(s.jsx)("input",{type:"text",id:"resolution_input",name:"resolution",defaultValue:"16"}),Object(s.jsx)("input",{type:"submit",value:"Create",onClick:e.setResolution})]}),Object(s.jsx)("label",{htmlFor:"texture-name-input",children:"File name:"}),Object(s.jsx)("input",{type:"text",name:"texture-name-input",id:"image_name",defaultValue:"texture",onKeyPress:function(e){e.key.match(/[\w\d.()]/)||e.preventDefault()}})]}),Object(s.jsx)("button",{onClick:function(){return e.state.editor.compose()},children:"Download"})]}),Object(s.jsx)("label",{id:"debug_check_label",htmlFor:"debug-check",children:"Debug"}),Object(s.jsx)("input",{name:"debug-check",type:"checkbox",onChange:function(t){var o=e.state;o.editor.debug=t.target.checked,e.setState(o)}})]})},e.updateColor=e.updateColor.bind(Object(g.a)(e)),e.setResolution=e.setResolution.bind(Object(g.a)(e)),e}return Object(p.a)(o,[{key:"updateColor",value:function(e){var t=this.state;e.target.value>255&&(e.target.value=255);var o=e.target.name.match(/rgb_([rgba])/)[1];t.editor.currentColor[o]=""===e.target.value?0:e.target.value,t.editor.getCurrentColor(),this.setState(t)}},{key:"setResolution",value:function(e){var t=this.state;e.preventDefault();var o=Number(document.getElementById("resolution_input").value);isNaN(o)||(o%16===0&&o>0&&o<=32?t.editor=y.create(t.app,o):console.log("No"),this.setState(t))}}]),o}(r.a.Component);var O=function(){return Object(s.jsxs)("div",{className:"App",children:[Object(s.jsx)("header",{children:Object(s.jsx)(d,{})}),Object(s.jsxs)("main",{children:[Object(s.jsx)(w,{}),Object(s.jsx)("div",{id:"debug"})]}),Object(s.jsxs)("footer",{children:[Object(s.jsx)("div",{children:"Built by ChrisOfNormandy."}),Object(s.jsxs)("div",{children:["Join ",Object(s.jsx)("a",{href:"https://discord.gg/EW5JsGJfdt",children:"Discord"})]})]})]})},k=function(e){e&&e instanceof Function&&o.e(3).then(o.bind(null,39)).then((function(t){var o=t.getCLS,n=t.getFID,r=t.getFCP,a=t.getLCP,i=t.getTTFB;o(e),n(e),r(e),a(e),i(e)}))};i.a.render(Object(s.jsx)(r.a.StrictMode,{children:Object(s.jsx)(O,{})}),document.getElementById("root")),k()}},[[38,1,2]]]);
//# sourceMappingURL=main.ab8cdb0d.chunk.js.map