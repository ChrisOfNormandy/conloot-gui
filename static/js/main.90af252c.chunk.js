(this["webpackJsonpconloot-gui"]=this["webpackJsonpconloot-gui"]||[]).push([[0],{23:function(e,t,n){},24:function(e,t,n){},35:function(e,t,n){},36:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},40:function(e,t,n){},41:function(e,t,n){},42:function(e,t,n){},43:function(e,t,n){"use strict";n.r(t);var r=n(1),o=n.n(r),i=n(15),a=n.n(i),s=(n(23),n(24),n(2)),c=n(7),l=n(3),u=n(5),d=n(4),h=n(8),b={position:{x:0,y:0,old:{x:0,y:0},document:{x:0,y:0}},button:{state:!1,id:0,origin:{x:null,y:null}},displacement:function(){return{x:null===b.position.old.x?0:b.position.x-b.position.old.x,y:null===b.position.old.y?0:b.position.y-b.position.old.y}},getPosition:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===e?{x:b.position.x,y:b.position.y}:{x:b.position.x-e.x,y:b.position.y-e.y}},inBounds:!1,moving:!1,clicked:!1},p=b;function g(e){var t=Number(e).toString(16);return 1===t.length?"0".concat(t):t}function f(e){return parseInt(e,16)}function v(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return Number("0x".concat(g(e)).concat(g(t)).concat(g(n)).concat(null!==r?g(r):""))}function m(e){return v(e.r,e.g,e.b)}function y(e,t,n){return Math.floor(t*n+e*(1-n))}function x(e,t){return 0===e.a?t:0!==t.a&&t?{r:y(e.r,t.r,t.a/255),g:y(e.g,t.g,t.a/255),b:y(e.b,t.b,t.a/255),a:e.a+t.a>255?255:e.a+t.a}:e}var j=function e(t){var n=this,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(Object(s.a)(this,e),this.visable=!0,this.opacity=255,this.pixels=[],this.clear=function(){n.pixels.forEach((function(e){return n.setPixel(e.x,e.y,null)}))},this.getPixel=function(e,t){return n.visable?n.pixels[t*n.resolution+e]?n.pixels[t*n.resolution+e]:null:{x:e,y:t,changed:n.pixels[t*n.resolution+e].changed,color:{r:0,g:0,b:0,a:0}}},this.toggle=function(){n.visable=!n.visable,n.editor.refresh=!0},this.updatePixel=function(e,t,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null,a=n.getPixel(e,t);return null===a||a.changed&&!o?null:(null===i?(a.color=null===r?{r:0,g:0,b:0,a:0}:x(a.color,r),a.changed=!0):a.color.a=a.color.a/255*i,a)},this.setPixel=function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return n.pixels[t*n.resolution+e]={color:null===r?{r:0,g:0,b:0,a:0}:r,x:e,y:t,changed:!1},n.pixels[t*n.resolution+e]},this.editor=t,this.resolution=t.resolution,null===r){var o=this.editor.layers.cache.map((function(e){return e.name}));if(o.length){var i=1;for(this.name="Layer ".concat(i);o.includes(this.name);)this.name="Layer ".concat(i),i++}else this.name="Layer 1"}else this.name=r;for(var a=0;a<t.resolution;a++)for(var c=0;c<t.resolution;c++)this.setPixel(a,c)};var O=h.d.shared,C=h.c,w={app:null,brush:{style:"pencil",fill:{r:0,g:0,b:0,a:255},size:1,mousePos:null,cursor:{position:{x:0,y:0,old:{x:0,y:0}},graphic:null,focus:null},preview:null,getStyle:function(){return w.brush.style},setStyle:function(e){switch(e){case"eraser":w.brush.cursor.graphic.tint=16777215,w.brush.cursor.graphic.alpha=1;break;case"fill":case"color-picker":w.brush.cursor.graphic.alpha=0;break;default:w.brush.cursor.graphic.tint=v(w.brush.fill.r,w.brush.fill.g,w.brush.fill.b),w.brush.cursor.graphic.alpha=w.brush.fill.a/255}w.brush.style=e},getColor:function(){return{r:w.brush.fill.r,g:w.brush.fill.g,b:w.brush.fill.b,a:w.brush.fill.a}},setColor:function(e){w.brush.cursor.graphic.tint=v(e.r,e.g,e.b),w.brush.cursor.graphic.alpha=e.a/255,w.brush.fill=e},getSize:function(){return w.brush.size},setSize:function(e){w.brush.size=e},updateCursor:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];w.brush.mousePos=p.getPosition(),w.brush.cursor.position.old.x=w.brush.cursor.position.x,w.brush.cursor.position.old.y=w.brush.cursor.position.y,w.brush.cursor.position.x=Math.floor((w.brush.mousePos.x-(w.brush.size-1)/2*w.scale)/w.scale),w.brush.cursor.position.y=Math.floor((w.brush.mousePos.y-(w.brush.size-1)/2*w.scale)/w.scale),w.brush.cursor.position.old.x===w.brush.cursor.position.x&&w.brush.cursor.position.old.y===w.brush.cursor.position.y||(w.brush.cursor.graphic.x=w.brush.cursor.position.x*w.scale,w.brush.cursor.graphic.y=w.brush.cursor.position.y*w.scale),t&&(w.brush.cursor.graphic.width=w.scale*w.brush.size,w.brush.cursor.graphic.height=w.scale*w.brush.size),e&&(w.brush.cursor.graphic.tint=v(w.brush.fill.r,w.brush.fill.g,w.brush.fill.b),w.brush.cursor.graphic.alpha=w.brush.fill.a/255)}},background:[],grid:new h.b,resolution:0,width:0,height:0,scale:0,debug:{enabled:!0,element:document.getElementById("debug")},pixels:[],layers:{cache:[],active:0,get:function(e){return w.layers.cache[e]},getActive:function(){return w.layers.cache[w.layers.active]},add:function(){var e=w.layers.cache.length;w.layers.cache.push(new j(k)),w.layers.active=e},remove:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1;return w.layers.cache.splice(e,1),w.layers.reload(),w.layers},move:function(e,t){var n=w.layers.cache.splice(e,1)[0];w.layers.cache.splice(t,0,n),w.layers.reload()},clear:function(){w.layers.cache=[]},toggle:function(e){w.layers.cache[e].visable=!w.layers.cache[e].visable,w.layers.reload()},reload:function(){w.refresh=!0}},buffer:[],gridFlag:!1,refresh:!1,doBoundUpdate:!0,bounds:null,updateBounds:function(){w.bounds=w.app.view.getBoundingClientRect(),w.doBoundUpdate=!1},startup:function(){return w.onReady((function(){return w.app.ticker.add((function(){return w.draw()}))})),w.app.view},onReady:function(e){console.log("App ready. Loading."),O.load(e)},clear:function(){w.layers.cache.forEach((function(e){return e.clear()})),w.refresh=!0},showGrid:function(){w.app.stage.removeChild(w.grid),w.app.stage.addChild(w.grid)},toggleGrid:function(){w.gridFlag=!w.gridFlag,w.gridFlag?w.app.stage.addChild(w.grid):w.app.stage.removeChild(w.grid)},updateDebug:function(){var e=p.getPosition(),t=Math.floor(e.x/w.scale),n=Math.floor(e.y/w.scale),r=w.pixels[n*w.resolution+t];r&&(w.debug.element.innerHTML="Mouse: ".concat(JSON.stringify(e)," --\x3e ").concat(t,", ").concat(n,"<br />")+" - ".concat(JSON.stringify(p.position.document),"<br />")+"Brush:<br />"+" - Color: ".concat(JSON.stringify(w.brush.fill),"<br />")+" - Pos: ".concat(w.brush.cursor.position.x,", ").concat(w.brush.cursor.position.y," --\x3e ").concat(w.brush.cursor.position.x+w.brush.size-1,", ").concat(w.brush.cursor.position.y+w.brush.size-1,"<br />")+" - Hex: 0x".concat(g(w.brush.fill.r)).concat(g(w.brush.fill.g)).concat(g(w.brush.fill.b),"<br />")+" - Style: ".concat(w.brush.style,"<br />")+"Buffer: ".concat(w.buffer.length,"<br />")+"Hover: ".concat(JSON.stringify(r.color),"<br />")+" - Tint:".concat(r.graphic.tint,"<br />")+" - Alpha: ".concat(r.graphic.alpha))},updatePixel:function(e,t){w.pixels[t*w.resolution+e]||w.setPixel(e,t);var n=null;w.layers.cache.forEach((function(r){if(r.visable){var o=r.getPixel(e,t).color;0!==o.a&&(n=null===n?o:x(o,n))}})),w.pixels[t*w.resolution+e].color=n||{r:0,g:0,b:0,a:0},w.pixels[t*w.resolution+e].graphic.tint=m(w.pixels[t*w.resolution+e].color),w.pixels[t*w.resolution+e].graphic.alpha=w.pixels[t*w.resolution+e].color.a/255},draw:function(){if(null!==w.debug.element){if(w.debug.enabled?(w.debug.element.classList.contains("hidden")&&w.debug.element.classList.remove("hidden"),w.updateDebug()):w.debug.element.classList.contains("hidden")||w.debug.element.classList.add("hidden"),w.refresh)return w.pixels.forEach((function(e){w.updatePixel(e.x,e.y),w.app.stage.removeChild(e.graphic),w.app.stage.addChild(e.graphic)})),w.app.stage.removeChild(w.brush.cursor.graphic),w.app.stage.addChild(w.brush.cursor.graphic),w.gridFlag&&w.showGrid(),void(w.refresh=!1);w.buffer.forEach((function(e,t){w.updatePixel(e.x,e.y),e.changed?p.button.state||(e.changed=!1):w.buffer.splice(t,1)})),w.brush.updateCursor();var e,t,n,r,o,i,a=w.layers.getActive();if(a)if(p.clicked)switch(w.brush.style){case"fill":var s={x:w.brush.cursor.position.x,y:w.brush.cursor.position.y},c={color:a.getPixel(s.x,s.y).color};t=w.brush.getColor(),n=!1,r=null;var l=[];!function o(i){var s=a.getPixel(i.x,i.y);null===s||!function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5;return Math.abs(e.r-t.r)<=n&&Math.abs(e.g-t.g)<=n&&Math.abs(e.b-t.b)<=n&&Math.abs(e.a-t.a)<=n}(s.color,c.color)||i.x<0||i.y>=w.resolution||i.y<0||i.y>=w.resolution||null!==(e=l.includes(i)?null:a.updatePixel(i.x,i.y,t,n,r))&&(w.buffer.push(e),l.push(i),o({x:i.x-1,y:i.y}),o({x:i.x+1,y:i.y}),o({x:i.x,y:i.y-1}),o({x:i.x,y:i.y+1}))}(s);break;case"color-picker":var u=a.getPixel(w.brush.cursor.position.x,w.brush.cursor.position.y).color;w.brush.setColor(u),w.brush.preview.update(),w.brush.updateCursor(!0)}else if(p.button.state&&0===p.button.id)switch(w.brush.style){case"fill":case"color-picker":break;default:for(var d=w.brush.cursor.position.x<0?0:w.brush.cursor.position.x;d<w.brush.cursor.position.x+w.brush.size&&d<w.resolution;d++)for(var h=w.brush.cursor.position.y<0?0:w.brush.cursor.position.y;h<w.brush.cursor.position.y+w.brush.size&&h<w.resolution;h++){switch(w.brush.style){case"paint":(t=w.brush.getColor()).a=w.brush.fill.a/255*Math.floor(255*(1-(o={x:w.brush.cursor.position.x+Math.floor(w.brush.size/2),y:w.brush.cursor.position.y+Math.floor(w.brush.size/2)},i={x:d,y:h},(Math.abs(i.x-o.x)+Math.abs(i.y-o.y))/Math.round(w.brush.size/2)))),t.a<0&&(t.a=0),n=w.brush.cursor.position.old.x!==w.brush.cursor.position.x||w.brush.cursor.position.old.y!==w.brush.cursor.position.y,r=null;break;case"eraser":t=null,n=w.brush.cursor.position.old.x!==w.brush.cursor.position.x||w.brush.cursor.position.old.y!==w.brush.cursor.position.y,r=0;break;default:t=w.brush.getColor(),n=!1,r=null}null!==(e=a.updatePixel(d,h,t,n,r))&&w.buffer.push(e)}}p.inBounds||(p.button.state=!1),p.clicked=!1}else w.debug.element=document.getElementById("debug")},compose:function(){var e=document.createElement("canvas"),t=e.getContext("2d");e.width=w.resolution,e.height=w.resolution;for(var n,r=t.createImageData(w.resolution,w.resolution),o=0;o<w.resolution;o++)for(var i=0;i<w.resolution;i++){var a=4*(i*w.resolution+o);n=w.getPixel(o,i).color,r.data[a]=n.r,r.data[a+1]=n.g,r.data[a+2]=n.b,r.data[a+3]=n.a}t.putImageData(r,0,0);var s=e.toDataURL("image/png"),c=document.createElement("a");c.href=s;var l=document.getElementById("image_name").value;c.setAttribute("download","".concat(l||"texture",".png")),c.click()},setPixel:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return w.pixels[t*w.resolution+e]={graphic:new C,color:null===n?{r:0,g:0,b:0,a:0}:n,changed:!1,x:e,y:t},w.pixels[t*w.resolution+e].graphic.beginFill(16777215),w.pixels[t*w.resolution+e].graphic.drawRect(0,0,w.scale,w.scale),w.pixels[t*w.resolution+e].graphic.endFill(),w.pixels[t*w.resolution+e].graphic.tint=m(w.pixels[t*w.resolution+e].color),w.pixels[t*w.resolution+e].graphic.alpha=w.pixels[t*w.resolution+e].color.a/255,w.pixels[t*w.resolution+e].graphic.x=e*w.scale,w.pixels[t*w.resolution+e].graphic.y=t*w.scale,w.pixels[t*w.resolution+e]},create:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16;if(null!==w.app)for(;w.app.stage.children[0];)w.app.stage.removeChild(w.app.stage.children[0]);w.app=e,w.resolution=t,w.width=e.view.width,w.height=e.view.height,w.scale=w.width/w.resolution,w.pixels=[],w.layers.clear(),w.layers.add(),w.brush.cursor.graphic=new C,w.brush.cursor.graphic.beginFill(16777215),w.brush.cursor.graphic.drawRect(0,0,w.scale,w.scale),w.brush.cursor.graphic.endFill(),w.brush.updateCursor(!0,!0);for(var n=w.layers.get(w.layers.active),r=0;r<w.resolution;r++){for(var o=0;o<w.resolution;o++){w.background[o*w.resolution+r]=new C,w.background[o*w.resolution+r].beginFill(16777215),w.background[o*w.resolution+r].drawRect(0,0,w.scale,w.scale),w.background[o*w.resolution+r].endFill(),w.background[o*w.resolution+r].tint=r%2===0&&o%2===1||r%2===1&&o%2===0?16777215:14540253,w.background[o*w.resolution+r].x=r*w.scale,w.background[o*w.resolution+r].y=o*w.scale,w.app.stage.addChild(w.background[o*w.resolution+r]),w.app.stage.addChild(w.setPixel(r,o).graphic),n.setPixel(r,o,w.pixels[o*w.resolution+r].color);var i=new h.c;i.lineStyle(1,0,1),i.moveTo(0,o*w.scale),i.lineTo(w.resolution*w.scale,o*w.scale),w.grid.addChild(i)}var a=new h.c;a.lineStyle(1,0,1),a.moveTo(r*w.scale,0),a.lineTo(r*w.scale,w.resolution*w.scale),w.grid.addChild(a)}return w.app.stage.addChild(w.brush.cursor.graphic),w}},k=w,_=n(0);var B=function(e){return Object(_.jsx)("div",{id:e.id,className:"menu".concat(e.hidden?" hidden":""),children:e.content.map((function(e,t){return Object(_.jsx)("div",{className:"menu-item",children:e},t)}))})},N=(n(35),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={editor:null,content:[{key:"File",id:"file_menu",value:Object(_.jsx)(B,{content:[Object(_.jsx)("div",{className:"menu-button",onClick:function(){return r.state.editor.compose()},children:"Download"}),Object(_.jsx)("div",{className:"menu-break"}),Object(_.jsxs)("div",{className:"menu-button",children:[Object(_.jsx)("label",{id:"debug_check_label",htmlFor:"debug-check",children:"Debug"}),Object(_.jsx)("input",{name:"debug-check",type:"checkbox",onChange:function(e){var t=r.state;t.editor.debug=e.target.checked,r.setState(t)}})]})],id:"file_menu",hidden:!0})},{key:"Edit",id:"edit_menu",value:Object(_.jsx)(B,{content:[Object(_.jsx)("div",{className:"menu-button",onClick:function(){return r.state.editor.clear()},children:"Clear"})],id:"edit_menu",hidden:!0})},{key:"View",id:"view_menu",value:Object(_.jsx)(B,{content:[Object(_.jsx)("div",{className:"menu-button",onClick:function(){r.state.editor.toggleGrid()},children:"Toggle Grid"})],id:"view_menu",hidden:!0})}]},r.componentDidMount=function(){var e=[];r.state.content.forEach((function(t){return e.push(document.getElementById(t.id))})),document.addEventListener("click",(function(t){e.forEach((function(e){e.parentElement.contains(t.target)||e.classList.add("hidden")}))}))},r.render=function(){return Object(_.jsx)("div",{className:"texture-editor-ribbon",children:r.state.content.map((function(e){return Object(_.jsxs)("div",{className:"ribbon-menu",children:[Object(_.jsx)("div",{className:"ribbon-menu-button",onClick:function(){document.getElementById(e.id).classList.toggle("hidden")},children:e.key}),e.value]},e.key)}))})},r.state.editor=e.editor,r.setResolution=r.setResolution.bind(Object(l.a)(r)),r}return Object(c.a)(n,[{key:"setResolution",value:function(e){e.preventDefault();var t=Number(document.getElementById("resolution_input").value);if(!isNaN(t)){var n=this.state;t%16===0&&t>0&&t<=128&&(n.editor=n.editor.create(this.editor.app,t)),this.setState(n)}}}]),n}(o.a.Component)),E=(n(36),n.p+"static/media/pencil.34dc5e45.svg"),L=n.p+"static/media/paintbrush.3b3671d0.svg",P=n.p+"static/media/eraser.4da23591.svg",M=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={editor:null,brush:null},r.brushes=[{key:"pencil",icon:E},{key:"paint",icon:L},{key:"eraser",icon:P},{key:"fill",icon:E},{key:"color-picker",icon:E}],r.render=function(){return Object(_.jsx)("div",{className:"brushes-container",children:r.brushes.map((function(e){return Object(_.jsx)("img",{src:e.icon,className:"brush-icon",id:"".concat(e.key,"_brush"),alt:e.key,onClick:function(){return r.state.brush.setStyle(e.key)}},e.key)}))})},r.state.editor=e.editor,r.state.brush=e.editor.brush,r}return n}(o.a.Component);n(37),n(38);var I=function(e){if(null===e)return console.error("Collapsable div was null.");e.style.maxHeight=e.style.maxHeight?null:e.scrollHeight+"px"};function S(e){return e.content()}var D=function(e){var t=e.id,n=e.content,r=document.getElementById(t);return Object(_.jsxs)("div",{className:"collapsable-container-wrapper",onLoad:function(){var e=document.getElementById(t);e.style.maxHeight=e.scrollHeight+"px"},children:[Object(_.jsx)("div",{className:"collapsable-container-group container-group",id:t,children:Object(_.jsx)(S,{content:n})}),Object(_.jsx)("div",{className:"collapsable-container-group-trigger",onClick:function(){I(r)}})]})},R=(n(39),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={brush:null},r.previewElem=null,r.container=null,r.updatePreview=function(){var e=r.state.brush.getColor();r.previewElem.style.backgroundColor="rgba(".concat(e.r,", ").concat(e.g,", ").concat(e.b,", ").concat(e.a/255,")")},r.updateRgb=function(){var e=r.state.brush.getColor();["r","g","b","a"].forEach((function(t){document.getElementById("rgb_".concat(t)).value=e[t],document.getElementById("rgb_".concat(t,"_slider")).value=e[t]}))},r.updateHex=function(){var e=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;return"".concat(g(e)).concat(g(t)).concat(g(n)).concat(null!==r?g(r):"")}(document.getElementById("rgb_r").value,document.getElementById("rgb_g").value,document.getElementById("rgb_b").value,document.getElementById("rgb_a").value);document.getElementById("hex").value=e},r.fetchDisplayColor=function(){return{r:document.getElementById("rgb_r").value,g:document.getElementById("rgb_g").value,b:document.getElementById("rgb_b").value,a:document.getElementById("rgb_a").value}},r.refresh=function(){r.previewElem=document.getElementById("color_picker_preview"),r.container=document.getElementById("color_picker_controls_container")},r.update=function(){r.updateRgb(),r.updatePreview(),r.updateHex()},r.rgbControls=function(){return Object(_.jsxs)("div",{className:"rgb-container-wrapper",children:[["r","g","b","a"].map((function(e){return Object(_.jsxs)("div",{className:"rgb-input-container",children:[Object(_.jsx)("div",{htmlFor:"rgb_".concat(e),className:"rgb-input-label",children:e.toUpperCase()}),Object(_.jsx)("input",{name:"rgb_".concat(e,"_slider"),id:"rgb_".concat(e,"_slider"),type:"range",min:"0",max:"255",className:"rgb-input-slider",onChange:function(t){document.getElementById("rgb_".concat(e)).value=t.target.value,r.updateColor(r.fetchDisplayColor()),r.updatePreview(),r.updateHex()},defaultValue:"a"===e?255:0},"".concat(e,"_slider")),Object(_.jsx)("input",{name:"rgb_".concat(e),id:"rgb_".concat(e),type:"text",className:"rgb-input-field",placeholder:"0",onChange:function(e){r.updateColor(r.fetchDisplayColor()),r.updatePreview(),r.updateHex()},onKeyPress:function(e){e.key.match(/[0-9]/)||e.preventDefault()},defaultValue:"a"===e?255:""},e)]},"rgb_".concat(e,"_div"))})),Object(_.jsx)("input",{name:"hex",id:"hex",type:"text",className:"hex-input-field",placeholder:"000000ff",onChange:function(e){var t=function(e){switch(e.length){case 0:return{r:0,g:0,b:0,a:255};case 1:return{r:f(e),g:f(e),b:f(e),a:255};case 3:var t=e.split("");return{r:f("".concat(t[0]+t[0])),g:f("".concat(t[1]+t[1])),b:f("".concat(t[2]+t[2])),a:255};case 4:var n=e.split("");return{r:f("".concat(n[0]+n[0])),g:f("".concat(n[1]+n[1])),b:f("".concat(n[2]+n[2])),a:f("".concat(n[3]+n[3]))};case 6:var r=e.split("");return{r:f("".concat(r[0]+r[1])),g:f("".concat(r[2]+r[3])),b:f("".concat(r[4]+r[5]))};case 8:var o=e.split("");return{r:f("".concat(o[0]+o[1])),g:f("".concat(o[2]+o[3])),b:f("".concat(o[4]+o[5])),a:f("".concat(o[6]+o[7]))};default:return{r:0,g:0,b:0,a:255}}}(e.target.value);for(var n in t)document.getElementById("rgb_".concat(n)).value=t[n];r.updateColor(r.fetchDisplayColor()),r.updatePreview()},onKeyPress:function(e){(!e.key.match(/[0-9A-Fa-f]/)||e.target.value.length>=8)&&e.preventDefault()},defaultValue:"000000ff"})]})},r.render=function(){return Object(_.jsxs)("div",{className:"side-bar-group",children:[Object(_.jsxs)("div",{className:"container-group",id:"color_picker_preview_container",children:[Object(_.jsx)("div",{className:"color-picker-preview",id:"color_picker_preview"}),Object(_.jsx)("div",{className:"brush-size-preview",id:"brush_size_preview"}),Object(_.jsx)("input",{className:"brush-size-input",id:"brush_size_input",type:"text",defaultValue:1,onChange:function(e){r.state.brush.setSize(Number(e.target.value))},onKeyPress:function(e){null===e.key.match(/[0-9]/)&&e.preventDefault()}})]}),Object(_.jsx)(D,{id:"color_picker_container",content:r.rgbControls})]})},r.state.brush=e.brush,r.state.brush.preview=Object(l.a)(r),r.updateColor=e.updateColor.bind(Object(l.a)(r)),r.fetchDisplayColor=r.fetchDisplayColor.bind(Object(l.a)(r)),r}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.refresh(),this.updatePreview()}}]),n}(o.a.Component)),z=n.p+"static/media/eye-open.157d1f69.svg",F=n.p+"static/media/minus.e3517047.svg",A=(n(40),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={layers:null},r.container=null,r.updateActiveLayer=function(e){var t=r.state;t.layers.active=e;for(var n=t.layers.cache.length-1;n>=0;)n!==e?document.getElementById("layer_".concat(n)).classList.remove("layer-item-selected"):document.getElementById("layer_".concat(n)).classList.add("layer-item-selected"),n--;r.setState(t)},r.updateLayerViewable=function(e){var t=r.state;t.layers.get(e).toggle(),document.getElementById("layer_".concat(e,"_viewable")).classList.toggle("layer-item-viewable"),r.setState(t)},r.layerMovementButtons=function(e,t){return Object(_.jsxs)("div",{className:"layer-item-movement-group",children:[Object(_.jsx)("div",{id:"layer_item_move_up",className:"layer-item-movement-button".concat(0===e?" hidden":""),onClick:function(){var t=r.state;t.layers.move(e,e-1),r.setState(t),r.updateActiveLayer(e-1)},children:"/\\"}),Object(_.jsx)("div",{id:"layer_item_move_down",className:"layer-item-movement-button".concat(e===t?" hidden":""),onClick:function(){var t=r.state;t.layers.move(e,e+1),r.setState(t),r.updateActiveLayer(e+1)},children:"\\/"})]})},r.refresh=function(){r.container=document.getElementById("layers_controls_container")},r.layerControls=function(){return Object(_.jsxs)("div",{children:[r.state.layers.cache.map((function(e,t){return Object(_.jsxs)("div",{className:"layer-item".concat(t===r.state.layers.active?" layer-item-selected":""),id:"layer_".concat(t),onClick:function(e){r.updateActiveLayer(t)},children:[r.layerMovementButtons(t,r.state.layers.cache.length-1),Object(_.jsx)("input",{type:"text",className:"layer-item-title",placeholder:"Layer ".concat(t+1),value:e.name,onChange:function(e){var n=r.state;n.layers.get(t).name=e.target.value,r.setState(n)}}),Object(_.jsx)("img",{src:z,alt:"Hide",className:"layer-item-button",id:"layer_".concat(t,"_viewable"),onClick:function(){r.updateLayerViewable(t)}}),Object(_.jsx)("img",{src:F,alt:"Remove",className:"layer-item-button",onClick:function(){var e=r.state;e.layers=e.layers.remove(t),r.setState(r.state)}})]},t)})),Object(_.jsx)("div",{className:"layer-add-item",onClick:function(){r.state.layers.add(),r.setState(r.state)},children:"Add Layer"})]})},r.render=function(){return Object(_.jsx)("div",{className:"side-bar-group",children:Object(_.jsx)(D,{id:"layer_container",content:r.layerControls})})},r.state.layers=e.layers,r.updateActiveLayer=r.updateActiveLayer.bind(Object(l.a)(r)),r.updateLayerViewable=r.updateLayerViewable.bind(Object(l.a)(r)),r.layerMovementButtons=r.layerMovementButtons.bind(Object(l.a)(r)),r}return Object(c.a)(n,[{key:"componentDidMount",value:function(){this.refresh(),this.updateActiveLayer(0)}}]),n}(o.a.Component)),H=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state={editor:null,brush:null,layers:null,container:null,origin:null,moving:null},r.group=function(e,t){return Object(_.jsxs)("div",{children:[Object(_.jsx)("div",{className:"side-bar-group-title",children:e}),t]})},r.componentDidMount=function(){var e=r.state;e.container=document.getElementById("side_bar_container"),e.origin=e.container.parentElement.getBoundingClientRect(),console.log(e.origin.right),e.container.style.left="".concat(e.origin.right-e.container.getBoundingClientRect().width,"px"),e.container.style.top="".concat(e.origin.y,"px"),r.setState(e)},r.move=function(e){if(null!==r.state.moving){var t=r.state,n=e.clientX-t.moving.x,o=e.clientY-t.moving.y,i=t.container.getBoundingClientRect();n>0&&n+i.width<window.innerWidth&&(t.container.style.left="".concat(n,"px")),o>0&&o+i.height<window.innerHeight&&(t.container.style.top="".concat(o,"px")),r.setState(t)}},r.render=function(){return Object(_.jsx)("div",{className:"side-bar-container",id:"side_bar_container",onMouseDown:function(e){var t=r.state,n=t.container.getBoundingClientRect(),o=e.clientX-n.x,i=e.clientY-n.y;i>16||(t.moving={x:o,y:i},r.setState(t))},onMouseUp:function(){var e=r.state;e.moving=null,r.setState(e)},onMouseLeave:function(){var e=r.state;e.moving=null,r.setState(e)},onMouseMove:r.move,children:Object(_.jsxs)("ul",{className:"side-bar-group-list",children:[Object(_.jsx)("li",{className:"side-bar-group",children:r.group("COLORS",Object(_.jsx)(R,{updateColor:r.updateColor,brush:r.state.brush}))}),Object(_.jsx)("li",{className:"side-bar-group",children:r.group("LAYERS",Object(_.jsx)(A,{layers:r.state.layers}))}),Object(_.jsx)("li",{className:"side-bar-group",children:Object(_.jsx)("div",{className:"debug",id:"debug"})})]})})},r.state.editor=e.editor,r.state.brush=e.editor.brush,r.state.layers=e.editor.layers,r.updateColor=e.updateColor,r}return n}(o.a.Component),T=(n(41),null),V=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).state={app:null,canvas:null,doBoundUpdate:!0,editor:k},e.getCanvas=function(){var t=document.getElementById("texture_editor_wrapper"),n=t.getBoundingClientRect().height<t.getBoundingClientRect().width?.9*t.getBoundingClientRect().height:.9*t.getBoundingClientRect().width,r=e.state;r.app=new h.a({width:n,height:n}),r.editor=k.create(r.app,16),r.app.view.oncontextmenu=function(e){e.preventDefault(),e.stopPropagation()},r.app.view.id="editor",r.canvas=r.editor.startup(),t.appendChild(r.canvas),e.setState(r)},e.componentDidMount=function(){e.getCanvas(),e.state.editor.updateBounds(),document.addEventListener("mousemove",(function(t){p.position.document.x=t.clientX,p.position.document.y=t.clientY,p.position.old={x:Math.floor(p.position.x),y:Math.floor(p.position.y)},p.position.x=Math.floor(t.clientX-e.state.editor.bounds.left),p.position.y=Math.floor(t.clientY-e.state.editor.bounds.top),p.moving=!0,T&&clearTimeout(T),T=setTimeout((function(){p.position.old={x:Math.floor(p.position.x),y:Math.floor(p.position.y)},p.moving=!1}),30)})),e.state.canvas.addEventListener("mousedown",(function(e){p.button.state=!0,p.button.id=e.button})),e.state.canvas.addEventListener("mouseup",(function(){p.button.state=!1,p.button.id=null})),e.state.canvas.addEventListener("mouseleave",(function(){return p.inBounds=!1})),e.state.canvas.addEventListener("mouseenter",(function(){return p.inBounds=!0})),e.state.canvas.addEventListener("click",(function(){return p.clicked=!0})),window.addEventListener("resize",(function(){return e.state.editor.updateBounds()}))},e.render=function(){return Object(_.jsxs)("div",{className:"editor-container",children:[Object(_.jsx)(M,{editor:e.state.editor}),Object(_.jsxs)("div",{className:"texture-editor-container",id:"texture_editor_container",children:[Object(_.jsx)(N,{editor:e.state.editor}),Object(_.jsx)("div",{className:"texture-editor-wrapper",id:"texture_editor_wrapper"}),Object(_.jsxs)("div",{className:"texture-editor-controls",children:[Object(_.jsx)("label",{htmlFor:"texture-name-input",children:"File name:"}),Object(_.jsx)("input",{type:"text",name:"texture-name-input",id:"image_name",defaultValue:"texture",onKeyPress:function(e){e.key.match(/[\w\d.()]/)||e.preventDefault()}})]})]}),Object(_.jsx)(H,{editor:e.state.editor,updateColor:e.updateColor})]})},e.updateColor=e.updateColor.bind(Object(l.a)(e)),e.fetchBrush=e.fetchBrush.bind(Object(l.a)(e)),e}return Object(c.a)(n,[{key:"fetchBrush",value:function(){return this.state.editor.brush}},{key:"updateColor",value:function(e){var t=this.state,n=t.editor.brush.getColor();for(var r in e)n[r]=""===e[r]?0:Number(e[r]);t.editor.brush.setColor(n),this.setState(t)}}]),n}(o.a.Component);var J=function(){return Object(_.jsx)("div",{className:"App",children:Object(_.jsx)(V,{})})},G=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,44)).then((function(t){var n=t.getCLS,r=t.getFID,o=t.getFCP,i=t.getLCP,a=t.getTTFB;n(e),r(e),o(e),i(e),a(e)}))},U=(n(42),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).render=function(){return Object(_.jsx)("div",{className:"nav-bar"})},e}return n}(o.a.Component));a.a.render(Object(_.jsxs)(o.a.StrictMode,{children:[Object(_.jsx)("header",{children:Object(_.jsx)(U,{})}),Object(_.jsx)("main",{children:Object(_.jsx)(J,{})}),Object(_.jsxs)("footer",{children:[Object(_.jsx)("div",{children:"Built by ChrisOfNormandy."}),Object(_.jsxs)("div",{children:["Join ",Object(_.jsx)("a",{href:"https://discord.gg/EW5JsGJfdt",children:"Discord"})]})]})]}),document.getElementById("root")),G()}},[[43,1,2]]]);
//# sourceMappingURL=main.90af252c.chunk.js.map